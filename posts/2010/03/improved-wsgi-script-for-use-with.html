<!DOCTYPE html>
<html class='v2' dir='ltr' lang='en'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/2508126174-css_bundle_v2.css' rel='stylesheet' type='text/css'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='http://blog.dscpl.com.au/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Graham Dumpleton - RSS" href="http://blog.dscpl.com.au/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Graham Dumpleton - Atom" href="https://www.blogger.com/feeds/2363643920942057324/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/5322237241401383060/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html' property='og:url'/>
<meta content='An improved WSGI script for use with Django.' property='og:title'/>
<meta content='Far too often one sees complaints on the Django users list and #django IRC channel that code that worked fine with the Django development se...' property='og:description'/>
<title>Graham Dumpleton: An improved WSGI script for use with Django.</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Blogger
URL:      www.blogger.com
----------------------------------------------- */
/* Content
----------------------------------------------- */
body {
font: normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
background: #66bbdd none repeat scroll top left;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2187bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #32aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #3299bb;
text-shadow: -1px -1px 1px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #3299bb;
}
.Header .description {
font-size: 140%;
color: #777777;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 1px solid #eeeeee;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #eeeeee;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.tabs-inner .widget ul {
background: #f5f5f5 url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png) repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #eeeeee;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #999999;
border-left: 1px solid #ffffff;
border-right: 1px solid #eeeeee;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #eeeeee;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #eeeeee;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #eeeeee;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: transparent;
color: #222222;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #222222;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #f9f9f9;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #eeeeee;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #f9f9f9;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #eeeeee;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #222222;
}
.mobile-link-button {
background-color: #2187bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid #eeeeee;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #eeeeee;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1020px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1020px;
max-width: 1020px;
_width: 1020px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 200px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 200px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("200px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 200px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 200px;
margin-right: -200px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
body#layout div.add_widget {
padding: 8px;
}
body#layout div.add_widget a {
margin-left: 32px;
}
--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<!-- data-ad-client=ca-pub-6433235630058377 -->

</head>
<body class='loading variant-pale'>
<div class='navbar section' id='navbar' name='Navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar/2363643920942057324?po\x3d5322237241401383060\x26origin\x3dhttp://blog.dscpl.com.au',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header' name='Header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://blog.dscpl.com.au/'>
Graham Dumpleton
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs no-items section' id='crosscol' name='Cross-Column'></div>
<div class='tabs no-items section' id='crosscol-overflow' name='Cross-Column 2'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main' name='Main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Sunday, March 28, 2010</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='2363643920942057324' itemprop='blogId'/>
<meta content='5322237241401383060' itemprop='postId'/>
<a name='5322237241401383060'></a>
<h3 class='post-title entry-title' itemprop='name'>
An improved WSGI script for use with Django.
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-5322237241401383060' itemprop='description articleBody'>
Far too often one sees complaints on the Django users list and #django IRC channel that code that worked fine with the Django development server doesn't work with Apache/mod_wsgi. For a number of those cases you will see the accusation that Apache/mod_wsgi must be wrong or is somehow broken. The real reason however is that when using the Django development server various setup steps are carried out which aren't performed if you use the WSGI handler interface provided by Django. The available Django documentation on using the WSGI interface doesn't however go into a great deal of technical detail. The end result is that it isn't obvious what needs to be done when using the Django WSGI interface so as to have the process environment setup to be equivalent to the Django development server, therefore guaranteeing trouble free porting of an application to a production environment using Apache/mod_wsgi, or any other WSGI hosting mechanism.<div><br /></div><div>The purpose of the post is to explain what actually happens when you use the Django development server as far as the setup of critical parts of the process environment, and compare that to what happens if you use the Django WSGI interface in the manner as described in the Django documentation. From that I will describe an alternate way of setting up and configuring Django for use with the supplied WGSI interface so as to better replicate how things are done within the Django development server.</div><div><br /></div><div>To help track down what happens we will instrument the 'settings.py' from a Django site to include the following.</div><pre>import sys, os<br /><br />print "__name__ =", __name__<br />print "__file__ =", __file__<br />print "os.getpid() =", os.getpid()<br />print "os.getcwd() =", os.getcwd()<br />print "os.curdir =", os.curdir<br />print "sys.path =", repr(sys.path)<br />print "sys.modules.keys() =", repr(sys.modules.keys())<br />print "sys.modules.has_key('mysite') =", sys.modules.has_key('mysite')<br />if sys.modules.has_key('mysite'):<br />  print "sys.modules['mysite'].__name__ =", sys.modules['mysite'].__name__<br />  print "sys.modules['mysite'].__file__ =", sys.modules['mysite'].__file__<br />  print "os.environ['DJANGO_SETTINGS_MODULE'] =", os.environ.get('DJANGO_SETTINGS_MODULE', None)</pre><div>Now, for my example the Django site is located at '/usr/local/django/mysite'. To run the Django development server I now from within that directory run 'python manage.py runserver'. The result of that is the following.</div><pre>__name__ = settings<br />__file__ = /usr/local/django/mysite/settings.pyc<br />os.getpid() = 3441<br />os.getcwd() = /usr/local/django/mysite<br />os.curdir = .<br />sys.path = ['/usr/local/django/mysite', ...]<br />sys.modules.keys() = [..., 'settings', ...]<br />sys.modules.has_key('mysite') = False<br />os.environ['DJANGO_SETTINGS_MODULE'] = None</pre><pre>__name__ = mysite.settings<br />__file__ = /usr/local/django/mysite/../mysite/settings.pyc<br />os.getpid() = 3441<br />os.getcwd() = /usr/local/django/mysite<br />os.curdir = .<br />sys.path = ['/usr/local/django/mysite', ...]<br />sys.modules.keys() = [..., 'mysite.settings', ..., 'mysite.sys', 'mysite.os', ..., 'mysite', ..., 'settings', ...]<br />sys.modules.has_key('mysite') = True<br />sys.modules['mysite'].__name__ = mysite<br />sys.modules['mysite'].__file__ = /usr/local/django/mysite/../mysite/__init__.pyc<br />os.environ['DJANGO_SETTINGS_MODULE'] = mysite.settings</pre><pre>__name__ = settings<br />__file__ = /usr/local/django/mysite/settings.pyc<br />os.getpid() = 3442<br />os.getcwd() = /usr/local/django/mysite<br />os.curdir = .<br />sys.path = ['/usr/local/django/mysite', ...]<br />sys.modules.keys() = [..., 'settings', ...]<br />sys.modules.has_key('mysite') = False<br />os.environ['DJANGO_SETTINGS_MODULE'] = None</pre><pre>__name__ = mysite.settings<br />__file__ = /usr/local/django/mysite/../mysite/settings.pyc<br />os.getpid() = 3442<br />os.getcwd() = /usr/local/django/mysite<br />os.curdir = .<br />sys.path = ['/usr/local/django/mysite', ...]<br />sys.modules.keys() = [..., 'mysite.settings', ..., 'mysite.sys', 'mysite.os', ..., 'mysite', ..., 'settings', ...]<br />sys.modules.has_key('mysite') = True<br />sys.modules['mysite'].__name__ = mysite<br />sys.modules['mysite'].__file__ = /usr/local/django/mysite/../mysite/__init__.pyc<br />os.environ['DJANGO_SETTINGS_MODULE'] = mysite.settings </pre><div>Two things stand out from this. The first is that there are two different processes involved and the second is that the same settings file is imported twice by each process but using a different Python module name in each instance.</div><div><br /></div><div>The existence of the two processes is explained by the fact that when running the Django development server it has a reload option whereby if changes are made to any code, that it will automatically restart the application. To do this it is necessary to have a supervisor or monitor process and an actual worker process. Each time that a code change is made and detected, the worker process is killed off and the supervisor process will create a new process to replace it. In that way the worker process, which is what is accepting the HTTP requests and handling them, will always have the most up to date code.</div><div><br /></div><div>That the settings file is imported more than once is a bit more tricky and it is likely that the majority wouldn't even know that this occurs. Possibly people would only notice if they had placed debugging statements in the settings file like above, or they had added code to it other than simple variable settings and the code performed an action which was cumulative and thus a problem occurred through the action occurring twice.</div><div><br /></div><div>So, how does the settings module get imported twice?</div><div><br /></div><div>The first time it gets imported is when you run the 'python manage.py runserver' command, the 'manage.py' file will import the settings file as the 'settings' module from the same directory.</div><div><br /></div><div>Worth noting at this point is that 'sys.path' includes the path '/usr/local/django/mysite', which is the directory the 'manage.py' and 'settings.py' are located in. This appears in 'sys.path' as it is standard behaviour of Python to add the directory that a script is contained in to 'sys.path' when a script is passed to Python to execute.</div><div><br /></div><div>Moving on, after having imported the settings module, the 'manage.py' file will eventually call 'django.core.management.execute_manager()' where the argument supplied is the reference to the 'settings' module it just imported. The code for the 'execute_manager()' functions is as follows.</div><pre>def execute_manager(settings_mod, argv=None):<br />   """<br />   Like execute_from_command_line(), but for use by manage.py, a<br />   project-specific django-admin.py utility.<br />   """<br />   setup_environ(settings_mod)<br />   utility = ManagementUtility(argv)<br />   utility.execute()</pre><div>The first function called by this is 'setup_environ()'. This function does two important things.</div><div><br /></div><div>The first thing the 'setup_environ()' function does is set the 'DJANGO_SETTINGS_MODULE' environment variable. Where as the settings module was originally imported as 'settings', the environment variable is instead referenced as a sub module of the package which is the Django site. Thus, instead of 'settings' it is referenced as 'mysite.settings' in this example.</div><div><br /></div><div>The second thing that is done is that the parent directory of the site is added to 'sys.path'. That is, where the site directory is '/usr/local/django/mysite', the directory '/usr/local/django' is added. Having done that, the site package root is imported. For this example, this means that 'mysite' is imported. Immediately after this has been imported however, the directory which was added, ie., '/usr/local/django' in this case, is immediately removed from 'sys.path'.</div><div><br /></div><div>After having does this initialisation, the 'execute_manager()' function creates an instance of the Django 'ManagementUtility' class. Control is then handed off to this class by calling the 'execute()' method.</div><div><br /></div><div>Delving down into the 'ManagementUtility' class, the next important function to be called is one called 'get_commands()' in the 'django.core.management' module.</div><div><br /></div><div>What this function does is come up with a list of all the possible management commands. These can be management commands that are supplied as standard with Django, such as 'runserver', or can be management commands associated with installed Django applications for the site as listed in the 'INSTALLED_APPS' variable of the settings module.</div><div><br /></div><div>To get the 'INSTALLED_APPS' variable however, it has to load the settings module. To get this the 'django.conf' module is imported and a global object called 'settings' within that module is accessed. That object isn't however the settings module itself, but an instance of the 'LazySettings' class.</div><div><br /></div><div>This 'LazySettings' object acts as a wrapper around the actual settings module. So, it does still import the settings module, but also provides a mechanism for user code to configure various settings variables such that they will override those from the actual settings module.</div><div><br /></div><div>Before it can do that however, it still has to import the original settings module. When it does this it ignores the fact that it was originally imported by the 'manage.py' command and instead loads the settings module based on the name which is recorded in the 'DJANGO_SETTINGS_MODULE' environment variable which was set above by the 'setup_environ()' function.</div><div><br /></div><div>It is this section of code where the notorious error 'Could not import settings '%s' (Is it on sys.path? Does it have syntax errors?)' comes from that so often afflicts people using mod_python and mod_wsgi when the Python module search path isn't set up correctly or the Apache user doesn't have the appropriate permissions to read the file.</div><div><br /></div><div>Anyway, this is where the second import of the settings module is triggered.</div><div><br /></div><div>We aren't quite done however, as there are a couple of other important things that the initialisation of the settings object does which are worth mentioning.</div><div><br /></div><div>The first is that if the 'INSTALLED_APPS' uses a wildcard to refer to a group of applications contained with a module, then in order to enumerate what those applications are, the module containing them is imported to determine where the module is located. That directory is then scanned for sub directories and each of those is taken to be an actual application.</div><div><br /></div><div>The second thing that is done is that if the 'TIME_ZONE' variable is set within the settings module, then the 'TZ' environment variable is set and the 'time.tzset()' function called.</div><div><br /></div><div>Okay, we went on a little side trip there to understand what happens when the settings module is imported. As pointed out though, this had to be done to get that list of installed applications, including those enumerated when a wildcard was used. Having got that list, it is then possible to generate the list of commands that those installed applications provide.</div><div><br /></div><div>To round out the picture, once the list of commands is generated it will for the case of 'python manage.py runserver' load the command for 'runserver'. This will result in 'django.core.management.commands.runserver' module being imported and control passed to it. The effect of that will be in this case to run the Django development server and start serving HTTP requests.</div><div><br /></div><div>Although the command module for the 'runserver' command principally deals with creating an instance of the development web server, it also does a couple of other configuration related steps which may be significant when we come to talk about Apache/mod_wsgi later.</div><pre>from django.conf import settings<br />from django.utils import translation<br />print "Validating models..."<br />self.validate(display_num_errors=True)<br />print "\nDjango version %s, using settings %r" % (django.get_version(), settings.SETTINGS_MODULE)<br />print "Development server is running at http://%s:%s/" % (addr, port)<br />print "Quit the server with %s." % quit_command<br /><br /># django.core.management.base forces the locale to en-us. We should<br /># set it up correctly for the first request (particularly important<br /># in the "--noreload" case).<br />translation.activate(settings.LANGUAGE_CODE)</pre><div>The first of these is that the models used by the application are validated. The second is that support for language locale is activated.</div><div><br /></div><div>So, we have worked out why it is the settings file was imported twice. We have also worked out why the package root for the site has been able to be imported even though after the fact the parent directory of the site isn't listed in 'sys.path'. The analysis also shows that various other side effects can occur, including importing of parts of the application, validation of data models, setting up of the language locale and time zone setting.</div><div><br /></div><div>Now let us compare all this to what happens when the WSGI interface is used under Apache/mod_wsgi.</div><div><br /></div><div>The guidance has always been that all you really needed to do for WSGI was to use:</div><pre>import os<br />import sys<br /><br />os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'<br /><br />import django.core.handlers.wsgi<br />application = django.core.handlers.wsgi.WSGIHandler()</pre><div>That in itself is not necessarily going to be sufficient. This is because Python isn't going to know where to find 'mysite' when it goes to import the settings module unless it had been installed in the standard Python 'site-packages' directory, which is unlikely. Thus, what you really need is as follows.</div><pre>import os<br />import sys<br /><br />sys.path.insert(0, '/usr/local/django')<br /><br />os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'<br /><br />import django.core.handlers.wsgi<br />application = django.core.handlers.wsgi.WSGIHandler()</pre><div>That is, we have inserted the parent directory of the site into 'sys.path'.</div><div><br /></div><div>The result now if we are to startup Apache/mod_wsgi and make a request will be the following.</div><pre>__name__ = mysite.settings<br />__file__ = /usr/local/django/mysite/settings.pyc<br />os.getpid() = 3733<br />os.getcwd() = /Users/grahamd<br />os.curdir = .<br />sys.path = ['/usr/local/django', ...]<br />sys.modules.keys() = [..., 'mysite.settings', ..., 'mysite.os', ..., 'mysite.sys', ..., 'mysite', ...]<br />sys.modules.has_key('mysite') = True<br />sys.modules['mysite'].__name__ = mysite<br />sys.modules['mysite'].__file__ = /usr/local/django/mysite/__init__.pyc<br />os.environ['DJANGO_SETTINGS_MODULE'] = mysite.settings<br /></pre><div>What is different?</div><div><br /></div><div>First off there is only one process, but that is simply because there is no supervisor or monitor process to handle reloading like with the Django development server.</div><div><br /></div><div>The second difference is that the settings module is only imported once and that is from the site package and not as a top level module. That is, it is imported as 'mysite.settings' and not 'settings'.</div><div><br /></div><div>The final difference is that 'sys.path' lists '/usr/local/django' where as in the Django development server it listed '/usr/local/django/mysite'.</div><div><br /></div><div>Remember though that with the Django development server the directory '/usr/local/django' was added to 'sys.path' but only long enough to have imported the 'mysite' package root for the site.</div><div><br /></div><div>The consequence of the directory having been removed when using the Django development server, is that if you wanted to import Python packages from a sibling directory to the site directory, you would need to explicitly add it to the 'PYTHONPATH' variable in the user environment from which 'python manage.py runserver' was run.</div><div><br /></div><div>In the case of using the WSGI interface directly as shown, the directory has to be included such that the settings module can be imported. Although by being added explicitly, it does mean that you have to be careful about what is contained in any sibling directories if you hadn't explicitly added the directory when using the Django development server. This is because those sibling directories will be considered when doing later module imports where as with Django development server they wouldn't.</div><div><br /></div><div>The bigger issue in respect of the differences between 'sys.path' for each hosting mechanism is that under Apache/mod_wsgi the directory '/usr/local/django/mysite' is missing.</div><div><br /></div><div>Why this causes a problem is that when using the Django development server people become used to being able to reference parts of a site without needing to use the site package prefix. This is especially problematic when references are within strings in the URL mappings contained in 'urls.py' but can also occur for Python module imports as well where they are within a further subdirectory of the site. Where either is used, the code will fail if the site is migrated to run under Apache/mod_wsgi.</div><div><br /></div><div>Obviously, the way around that is in the WSGI script file used for Apache/mod_wsgi to also add the directory '/usr/local/django/mysite' to 'sys.path', thus yielding the following.</div><pre>import os<br />import sys<br /><br />sys.path.insert(0, '/usr/local/django/mysite')<br />sys.path.insert(0, '/usr/local/django')<br /><br />os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'<br /><br />import django.core.handlers.wsgi<br />application = django.core.handlers.wsgi.WSGIHandler()</pre><div>It should be noted that having to do this highlights an arguable flaw in what Django permits when using the development server. This is because it is now possible to import the same module file via two different names. If naming isn't done consistently, you could end up with multiple copies of the module in memory and with any code within it being executed twice. If any code references global variables within the module, then different parts of the code may not end up accessing the same variable.</div><div><br /></div><div>These points aside, is there anything else different between the Django development server and Apache/mod_wsgi?</div><div><br /></div><div>The obvious ones are that because the Django development server is never run, that the validation of the models and the setup of the language locale are never done.</div><div><br /></div><div>More significant is that the Django 'ManagementUtility' class is never created and the list of available management commands is never calculated. This means that any implicit actions resulting from that are never performed.</div><div><br /></div><div>The main side effect is that of initialisation of the settings object which wraps the settings module. As described, this sets up the timezone but also can cause additional module imports to be done as the installed applications have to be loaded when wildcards are used.</div><div><br /></div><div>Because the settings object is so key to the operation of Django, it will still be initialised at a later point when required. Even so, there is still a potential difference due to the order in which things are done.</div><div><br /></div><div>Even more problematic than the order though is the context in which the settings modules is finally loaded and the associated initialisation performed.</div><div><br /></div><div>For the Django development server only a single thread is used and all the initialisation is done up front before any requests are handled.</div><div><br /></div><div>In the case of Apache/mod_wsgi where particular configurations can be multithreaded, the initialisation is only done within the context of the handling of the first request. While this is being done it is possible that a concurrent request could also be occurring.</div><div><br /></div><div>If there is anything about the Django core code or the way in which user code makes use of it which is not completely thread safe,  then there is a risk that multithreading could result in aspects of the settings and other global data being accessed before it is properly initialised from concurrent requests other than the one that got to trigger the initialisation.</div><div><br /></div><div>One can only speculate on how such problems may manifest, but certainly it could explain a number of the odd problems people see when running under Apache/mod_wsgi, especially where the application can be under load from the moment that a process gets restarted.</div><div><br /></div><div>I am starting to run out of steam with this blog post, so lets just jump straight to a possible solution. This is in the form of the alternate WSGI script file contents below.</div><pre>import sys<br /><br />sys.path.insert(0, '/usr/local/django/mysite')<br /><br />import settings<br /><br />import django.core.management<br />django.core.management.setup_environ(settings)<br />utility = django.core.management.ManagementUtility()<br />command = utility.fetch_command('runserver')<br /><br />command.validate()<br /><br />import django.conf<br />import django.utils<br /><br />django.utils.translation.activate(django.conf.settings.LANGUAGE_CODE)<br /><br />import django.core.handlers.wsgi<br /><br />application = django.core.handlers.wsgi.WSGIHandler()</pre><div>What this is doing is duplicating the way that Django development server is set up.</div><div><br /></div><div>Key is that because an import lock is held when the WSGI script file is first imported, everything is done up front, effectively in the context of a single thread before any concurrent requests can start executing. This avoids all the problems with multithreading.</div><div><br /></div><div>We also don't even set 'DJANGO_SETTINGS_MODULE' environment variable and instead leave it up to Django to set it just like with the Django development server. This does mean that the site directory is added to 'sys.path' and that the settings module has to be explicitly imported, with a subsequent second importing of the settings module by a different name, but this is exactly what the Django development server does. The temporary adding of the parent directory for the site into 'sys.path' to import the site package root is still even done by Django just as with the Django development server.</div><div><br /></div><div>Further, the management command infrastructure is initialised and the loading of commands triggered by fetching the command object for 'runserver'. The validation of models is even triggered along with initialisation of the language locale.</div><div><br /></div><div>After all that, we create the WSGI application entry point as normal and we are done.</div><div><br /></div><div>All up, this should be nearly identical to what happens when the Django development server is used. About the only difference is that if 'python manage.py runserver' is used that the current working directory would usually be the site directory. Under Apache/mod_wsgi the current working directory is going to be something else. But then, you shouldn't ever be using relative paths for file system resources anyway.</div><div><br /></div><div>Anyway, my brain is about fried now.</div><div><br /></div><div>If you know anything about the Django internals, I hope you find this interesting and will validate if my analysis is correct.</div><div><br /></div><div>If you are having problems with porting code between the Django development server and Apache/mod_wsgi, then perhaps you will give this alternate WSGI script file contents a go and see if things then work without problem.</div><div><br /></div><div>Once I get sufficient feedback and validation that this is a better solution for the WSGI script file, then I will update the integration guide for Django on the mod_wsgi site.</div><div><br /></div><div>What would be nice though is if Django simply supplied a WSGI application entry point that could be supplied the site directory and which would internally simply ensure that everything is done correctly so that it behaves the same as the Django development server. </div>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://www.blogger.com/profile/13609779138164842374' itemprop='url'/>
<a class='g-profile' href='https://www.blogger.com/profile/13609779138164842374' rel='author' title='author profile'>
<span itemprop='name'>Graham Dumpleton</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html' itemprop='url'/>
<a class='timestamp-link' href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2010-03-28T20:49:00+11:00'>8:49&#8239;PM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post/2363643920942057324/5322237241401383060' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=5322237241401383060&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=5322237241401383060&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=5322237241401383060&target=twitter' target='_blank' title='Share to X'><span class='share-button-link-text'>Share to X</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=5322237241401383060&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=5322237241401383060&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
Labels:
<a href='http://blog.dscpl.com.au/search/label/django' rel='tag'>django</a>,
<a href='http://blog.dscpl.com.au/search/label/mod_wsgi' rel='tag'>mod_wsgi</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>43 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author ' id='c6578393874331769647'>
<a name='c6578393874331769647'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="//resources.blogblog.com/img/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6578393874331769647'>
<p>
I&#39;m unable to completely remove the project name from app models imports under apache/wsgi. The projects are named differently in my development and production environments (probably my first mistake), so I need to be able to get the project name entirely out of the codebase.<br /><br />I can take it out completely in my development environment, but not with my apache/wsgi production environment. I&#39;ve tried your recipe above, and no dice.<br /><br />Crucially, it only blows up with the custom comments app, and only in ONE SINGLE PLACE. I&#39;ve got about five different &quot;from comments.models import MyComment&quot; statements in various parts of my code, and only in one templatetags library (&#39;entry_tags&#39;) am I obliged to type &quot;from mysite.comments.models import MyComment&quot;, or else it complains:<br /><br />TemplateSyntaxError: &#39;entry_tags&#39; is not a valid tag library: Could not load template library from django.templatetags.entry_tags, No module named models<br /><br />I suspect this is mostly a problem with how the custom comments apps work, but it does show up under wsgi only...
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269849967300#c6578393874331769647' title='comment permalink'>
March 29, 2010 at 7:06&#8239;PM
</a>
<span class='item-control blog-admin pid-159164253'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/6578393874331769647' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5022476517194238499'>
<a name='c5022476517194238499'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5022476517194238499-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5022476517194238499'>
<p>
锁柱子. I would try the following two things.<br /><br />1. Just to eliminate current working issues as a contributor, do &quot;os.chdir(&#39;/usr/local/django/mysite&#39;)&quot;, but with whatever your site directory is. Do this at start of WSGI script before any initialisation steps done.<br /><br />2. Add somehow some debug code or something in your template tag library or template itself which dumps out what is the set of Python &#39;globals()&#39; and &#39;locals()&#39; in the context in which the template tag is used, plus &#39;sys.modules.keys()&#39; and &#39;sys.modules[&#39;comments&#39;].__file__&#39;. Maybe there is already a module loaded under that name or something in the context which is causing a problem. In other words a naming clash with that name already being used by something else.<br /><br />Appreciate that you could take this issue of yours other to the mod_wsgi list so we can investigate further.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269852625824#c5022476517194238499' title='comment permalink'>
March 29, 2010 at 7:50&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5022476517194238499' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6751089671783820993'>
<a name='c6751089671783820993'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/04022688498704778104" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6751089671783820993-04022688498704778104"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Gustavo Narea">

</a></span></div>
<a href='https://www.blogger.com/profile/04022688498704778104' rel='nofollow'>Gustavo Narea</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6751089671783820993'>
<p>
Nice article, Graham!<br /><br />I just wanted to say, I believe it&#39;d be even better not to rely on Django&#39;s development server in the first place, to make sure the application under development is really portable.<br /><br />We use Paste Script and I know of some people of who use Cherrypy&#39;s server.<br /><br />Getting Django to work on Paste Script is now easier, thanks to twod.wsgi:<br />http://packages.python.org/twod.wsgi/manual/paste-factory.html<br /><br /> - Gustavo.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269853368418#c6751089671783820993' title='comment permalink'>
March 29, 2010 at 8:02&#8239;PM
</a>
<span class='item-control blog-admin pid-1540996211'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/6751089671783820993' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5740428882142011837'>
<a name='c5740428882142011837'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5740428882142011837-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5740428882142011837'>
<p>
Gustavo, that will not help because of some of the issues I raise.<br /><br />Part of the problem is that the Django WSGIHandler doesn&#39;t force up front initialisation of Django during setup of the WSGI server and/or loading of the WSGI script. Ie., where single threadedness is guaranteed. As a result in a multithreaded system, whether than be Apache/mod_wsgi, Paste or CherryPy WSGI server, the lazy initialisation of Django within the context of a request, can be a potential problem where concurrent requests are executing.<br /><br />Unless twod.wsgi does something explicit to force upfront initialisation of Django before a request is actually handled, like I propose with my WSGI script changes, then it could also suffer some of the same odd problems that some people see for Apache/mod_wsgi even if those other hosting mechanisms are used.<br /><br />FWIW, Apache/mod_wsgi can also be used as a development platform for Django. One of the main reasons people use the Django development server is because of automatic code reloading, but that can also be done with Apache/mod_wsgi.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269858544328#c5740428882142011837' title='comment permalink'>
March 29, 2010 at 9:29&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5740428882142011837' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2056234524766666451'>
<a name='c2056234524766666451'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2056234524766666451-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2056234524766666451'>
<p>
锁柱子. Also:<br /><br />3. Perform &#39;import comments&#39; and just validate which module it is importing by dumping out &#39;__file__&#39; attribute of the module. This is in case it wasn&#39;t imported prior to &#39;from comments.models import ...&#39;.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269858637802#c2056234524766666451' title='comment permalink'>
March 29, 2010 at 9:30&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2056234524766666451' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7392007701916167675'>
<a name='c7392007701916167675'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/04022688498704778104" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7392007701916167675-04022688498704778104"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Gustavo Narea">

</a></span></div>
<a href='https://www.blogger.com/profile/04022688498704778104' rel='nofollow'>Gustavo Narea</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7392007701916167675'>
<p>
Hi, Graham.<br /><br />As you say, it wouldn&#39;t try to fix those import errors. Which is why I think it&#39;s a better solution from a portability point of view:<br /><br />What I&#39;m saying is that developers shouldn&#39;t rely on Django&#39;s development server because it does some magic under the hood and this sometimes affects portability. Therefore I suggest to use a Django-agnostic development server; any server.<br /><br />If an application is broken under mod_wsgi, it will likely be broken on any other server but it may still work under Django&#39;s.<br /><br />I wouldn&#39;t like to work around this problem by making my mod_wsgi script more complex. Specially because the API used may change or the steps to be performed may be different in future releases.<br /><br />Of course, if Django offered a single function to run that routine, I wouldn&#39;t mind calling it from my WSGI script.<br /><br />Cheers,<br /><br /> - Gustavo.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269860792660#c7392007701916167675' title='comment permalink'>
March 29, 2010 at 10:06&#8239;PM
</a>
<span class='item-control blog-admin pid-1540996211'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7392007701916167675' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4992612590084076453'>
<a name='c4992612590084076453'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17756588602580974678" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4992612590084076453-17756588602580974678"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Doug Blank">

</a></span></div>
<a href='https://www.blogger.com/profile/17756588602580974678' rel='nofollow'>Doug Blank</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4992612590084076453'>
<p>
Thank you for the detailed explanation of what actually happens with these two systems. A shortened, explanation-oriented version would be useful in the django docs. And fixing these differences would be useful too. Is there a django ticket for this?
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269864880894#c4992612590084076453' title='comment permalink'>
March 29, 2010 at 11:14&#8239;PM
</a>
<span class='item-control blog-admin pid-1956460240'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/4992612590084076453' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7318451537107001690'>
<a name='c7318451537107001690'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/15556846298191919211" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7318451537107001690-15556846298191919211"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Doug">

</a></span></div>
<a href='https://www.blogger.com/profile/15556846298191919211' rel='nofollow'>Doug</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7318451537107001690'>
<p>
I stopped using manage.py a long time ago because of the whole double settings approach it takes.<br /><br />I setup my project environment with an alias to django-admin.py &quot;da&quot; and a properly set DJANGO_SETTINGS_MODULE.<br /><br />That ends up working just fine.<br /><br />The one thing I never figured out with mod_wsgi was how to get multiple web apps running with different timezone settings.  The last one initialized always seemed to win.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269869974138#c7318451537107001690' title='comment permalink'>
March 30, 2010 at 12:39&#8239;AM
</a>
<span class='item-control blog-admin pid-1386859075'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7318451537107001690' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5063629652949357929'>
<a name='c5063629652949357929'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5063629652949357929-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5063629652949357929'>
<p>
Foo. To fix timezone issue you must use mod_wsgi daemon mode and delegate each Django instance to run in a separate daemon process group. There is simply no other way as you can&#39;t run two different application instances in same process that want different timezone settings. The separation offered by using multiple Python sub interpreters in the same process is not enough as the timezone setting is process wide.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1269898515478#c5063629652949357929' title='comment permalink'>
March 30, 2010 at 8:35&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5063629652949357929' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6405223199659339070'>
<a name='c6405223199659339070'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/05987789426843540503" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6405223199659339070-05987789426843540503"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Carl">

</a></span></div>
<a href='https://www.blogger.com/profile/05987789426843540503' rel='nofollow'>Carl</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6405223199659339070'>
<p>
This is very helpful, thanks for the sleuthing.<br /><br />As Foo mentioned, there&#39;s a distinction between manage.py and runserver. You conflated the two in your post, but in fact if you set DJANGO_SETTINGS_MODULE in the environment and use &quot;django-admin.py runserver&quot;, the double-import of settings.py goes away.<br /><br />I&#39;m not sure how that affects the thread-safety issues you discuss, but to the extent that it is possible I think a solution that involves modifying how I invoke runserver is preferable to one that inserts cruft into my WSGI script.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1270585112995#c6405223199659339070' title='comment permalink'>
April 7, 2010 at 6:18&#8239;AM
</a>
<span class='item-control blog-admin pid-1046094195'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/6405223199659339070' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c1529491811690120096'>
<a name='c1529491811690120096'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1529491811690120096-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1529491811690120096'>
<p>
Carl. Thanks, I didn&#39;t note the importance of what Foo said as I didn&#39;t know that one could use &#39;django-admin.py&#39; to do that. Thus why when I meant &#39;runserver&#39; I always was meaning &#39;python  manage.py runserver&#39;. They are still both executing the same internal Django development server by the same mechanism.<br /><br />The differences are that &#39;django-admin.py&#39; relies on DJANGO_SETTINGS_MODULE and PYTHONPATH being set in environment. As such, it is more aligned with what mod_python and mod_wsgi in that that is effectively what they require. This extends to the double import going away and the parent directory being permanently in sys.path and the site directory not at all in sys.path.<br /><br />This is part of my gripe, that there are multiple ways of starting things up and because what is set up is different in each case leads to issues with code not working when moved to a different way of doing the hosting.<br /><br />For example, don&#39;t use the site name in &#39;urls.py&#39; and use &#39;manage.py&#39; and it will work. Do that with &#39;django-admin.py&#39; and I believe it would fail as the site directory isn&#39;t in &#39;sys.path&#39;.<br /><br />Anyway, using &#39;django-admin.py&#39; may well be better if wanting more guarantees of portability to other hosting mechanisms as far as Python path issues, however it isn&#39;t going to help with the other stuff I raised as both methods still do those extra bits related to the management utility instance and command loading which WSGI approach doesn&#39;t do if documented method used. You still also have the issue of setup in multithreaded context within context of request if you use original WSGIHandler instance only and don&#39;t force setup when WSGI script loaded.<br /><br />Seems I may have to do a followup now showing how &#39;django-admin.py&#39; results in a third variation in how the environment is setup.<br /><br />BTW, the Django tutorial seems to always use &#39;python manage.py runserver&#39;. I would say therefore that this is what the majority use and most probably don&#39;t realise you can use &#39;django-admin.py&#39; in similarly way providing configuration set up in user environment correctly.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1270600661455#c1529491811690120096' title='comment permalink'>
April 7, 2010 at 10:37&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/1529491811690120096' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c9176010606586116652'>
<a name='c9176010606586116652'></a>
<div class="avatar-image-container vcard"><span dir="ltr"><a href="https://www.blogger.com/profile/00681756689019735665" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-9176010606586116652-00681756689019735665"><img src="https://resources.blogblog.com/img/blank.gif" width="35" height="35" class="delayLoad" style="display: none;" longdesc="//4.bp.blogspot.com/_KUap9DBPt6U/SwYTVdqO02I/AAAAAAAACRQ/A3wiCwyyNqc/S45-s35/Sklass%2BHeadshot%2B640x640.jpg" alt="" title="Steven Klass">

<noscript><img src="//4.bp.blogspot.com/_KUap9DBPt6U/SwYTVdqO02I/AAAAAAAACRQ/A3wiCwyyNqc/S45-s35/Sklass%2BHeadshot%2B640x640.jpg" width="35" height="35" class="photo" alt=""></noscript></a></span></div>
<a href='https://www.blogger.com/profile/00681756689019735665' rel='nofollow'>Steven Klass</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9176010606586116652'>
<p>
Wow.  You helped me to understand this at a much deeper level.  Thanks for taking the time to document it.  I wasn&#39;t dealing with WSGI so much as just the way in which the --noreload affects (or rather f*xks) with the settings loading.  <br /><br />My thoughts --noreload is the only way to go unless you explicitly use it in combinatin of --settings.  What&#39;s worse is the different behavior depending on whether you call it from manage.py or django-admin.py.  Grumble Grumble Grumble.  <br /><br />I am simply floored this hasn&#39;t been better documented.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1273841917126#c9176010606586116652' title='comment permalink'>
May 14, 2010 at 10:58&#8239;PM
</a>
<span class='item-control blog-admin pid-1616756230'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/9176010606586116652' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1777932135403309085'>
<a name='c1777932135403309085'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/14432630642920802019" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1777932135403309085-14432630642920802019"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Art Botterell">

</a></span></div>
<a href='https://www.blogger.com/profile/14432630642920802019' rel='nofollow'>Art Botterell</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1777932135403309085'>
<p>
Huge thanks for this, Graham!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1277789118769#c1777932135403309085' title='comment permalink'>
June 29, 2010 at 3:25&#8239;PM
</a>
<span class='item-control blog-admin pid-1457809475'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/1777932135403309085' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c1715409636626083003'>
<a name='c1715409636626083003'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1715409636626083003-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1715409636626083003'>
<p>
@Art. Would you be able to add what sort of problem this has helped you solve. There is still a bit of a debate with Django devs over what this is actually helping solve. It certainly is fixing issues for some people, but  there is a question over whether it is merely covering up where users aren&#39;t actually doing things by the book as far as how it is documented Django should work. Thus, as much information as possible about any issue you were having which this has fixed would be appreciated. If too hard to post details as blog comment, come over to the mod_wsgi mailing list.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1277789523711#c1715409636626083003' title='comment permalink'>
June 29, 2010 at 3:32&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/1715409636626083003' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2306375115660946734'>
<a name='c2306375115660946734'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/05857839783348870711" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2306375115660946734-05857839783348870711"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="J&ouml;rn">

</a></span></div>
<a href='https://www.blogger.com/profile/05857839783348870711' rel='nofollow'>Jörn</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2306375115660946734'>
<p>
Hi Graham,<br /><br />thanks a lot for this detailed post.<br /><br />It helped us A LOT to fix a big issues on our webservers.<br /><br />Our setup:<br />- multiple VirtualHosts on Apache<br />- each host serves one django site<br />- we run different versions of django (1.02, 1.1 and 1.2)<br />- we don&#39;t use virtualenv, we normally set up sys.path<br />- a site.wsgi file like recommended here:<br />   http://code.djangoproject.com/wiki/django_apache_and_mod_wsgi and here:<br />   http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango<br /><br />The problem:<br />- sporadically I received error mails with weird errors: the request path of site A threw an error with a path only available on site B<br />- I set up an test page showing all our hosts within iFrames. A (concurrent) refresh showed the problem: the server mixed up the sites and sometime even combined parts of the different sites.<br /><br />The theory:<br />- concurrent requests mess up the import of different setting.py&#39;s<br /><br />The solution:<br />- your post and your &quot;possible solutions&quot; fixed the problem.<br /><br />This configuration should really be recommended on the mentioned sites.<br /><br />Thanks again!<br /><br />Best<br />Jörn
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1289211492256#c2306375115660946734' title='comment permalink'>
November 8, 2010 at 9:18&#8239;PM
</a>
<span class='item-control blog-admin pid-468442246'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2306375115660946734' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2565164429413307857'>
<a name='c2565164429413307857'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2565164429413307857-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2565164429413307857'>
<p>
Jörn, it is referenced from page on mod_wsgi site, albeit was only added in the last day or so. The modified WSGI script file should not have helped with your problem. I&#39;d suggest that you might have an underlying Apache configuration problem. You are best off using daemon mode for a start and delegate each Django site to it&#39;s own daemon process. You can look at the WSGI request environment to validate whether instance running in correct daemon process group and interpreter.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1289211800620#c2565164429413307857' title='comment permalink'>
November 8, 2010 at 9:23&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2565164429413307857' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8899425135163526878'>
<a name='c8899425135163526878'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/05857839783348870711" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8899425135163526878-05857839783348870711"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="J&ouml;rn">

</a></span></div>
<a href='https://www.blogger.com/profile/05857839783348870711' rel='nofollow'>Jörn</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8899425135163526878'>
<p>
Hi Graham,<br /><br />obviously the different &quot;import approach&quot; fixed our problem. <br />Instead of the officially recommend:<br /><br />os.environ[&#39;DJANGO_SETTINGS_MODULE&#39;] = &#39;mysite.settings&#39;<br /><br />we import settings explicitly (our .wsgi file is located in PROJECT_ROOT/apache/site.wsgi):<br /><br />APACHE_DIR = os.path.dirname(os.path.abspath(__file__))<br />PROJECT_ROOT = os.path.abspath(&quot;%s/..&quot; % APACHE_DIR)<br />DJANGO_SITES, SITE  = os.path.split(PROJECT_ROOT)<br />SITE_PACKAGES = os.path.abspath(&quot;%s/../site-packages-1.1&quot; % DJANGO_SITES)<br /><br />sys.path.insert(0, PROJECT_ROOT)<br />sys.path.insert(0, DJANGO_SITES)<br />sys.path.insert(0, SITE_PACKAGES)<br /><br />import settings_productive<br />import django.core.management<br />django.core.management.setup_environ(settings_productive)<br /><br />The daemon mode is the next configuration change we will do anyway. <br /><br />Best<br />Jörn
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1289212422629#c8899425135163526878' title='comment permalink'>
November 8, 2010 at 9:33&#8239;PM
</a>
<span class='item-control blog-admin pid-468442246'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/8899425135163526878' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3002266298653602141'>
<a name='c3002266298653602141'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02569250301676929135" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3002266298653602141-02569250301676929135"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="MidGe">

</a></span></div>
<a href='https://www.blogger.com/profile/02569250301676929135' rel='nofollow'>MidGe</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3002266298653602141'>
<p>
Great Post! Thank you!<br /><br />It isn&#39;t very often that a search for a troubleshooting issue suggests a link to such a well documented answer. And it works!<br /><br />Thanks again!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1290334288222#c3002266298653602141' title='comment permalink'>
November 21, 2010 at 9:11&#8239;PM
</a>
<span class='item-control blog-admin pid-1479372922'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/3002266298653602141' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4334643895329834656'>
<a name='c4334643895329834656'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02090509364532760353" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4334643895329834656-02090509364532760353"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="bvce">

</a></span></div>
<a href='https://www.blogger.com/profile/02090509364532760353' rel='nofollow'>bvce</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4334643895329834656'>
<p>
Graham,<br />Thank you very much for this post. Trying to make configuration for wsgi with apcahe was hardly imposible.... with your help, fixed in minutes.<br />Thanks for your time and effort.<br />bvcelari
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1292326211286#c4334643895329834656' title='comment permalink'>
December 14, 2010 at 10:30&#8239;PM
</a>
<span class='item-control blog-admin pid-1188970846'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/4334643895329834656' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c5249717620815636075'>
<a name='c5249717620815636075'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5249717620815636075-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5249717620815636075'>
<p>
@bvcelari<br /><br />Problem is that this alternate script is really a workaround. Django devs think it should not be needed and that if it is then users are using Django wrongly.<br /><br />Thus, using the script could be masking a problem in your code which might come back and bight you in other ways.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1292327141955#c5249717620815636075' title='comment permalink'>
December 14, 2010 at 10:45&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5249717620815636075' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7818466370226130283'>
<a name='c7818466370226130283'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/10821112074359016243" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7818466370226130283-10821112074359016243"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="primeq">

</a></span></div>
<a href='https://www.blogger.com/profile/10821112074359016243' rel='nofollow'>primeq</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7818466370226130283'>
<p>
Django is great. Python is great. But when you need to give your life to something to make it work a lot of people will just walk.<br /><br />You may be right with &quot;Django devs think it should not be needed ...then users are using Django wrongly&quot;, but there&#39;s a sure way to fix it - said Django devs should post a guaranteed-to-work, self-contained example (not there, too many implicit assumptions made).<br /><br />Your post is pure gold. When I start working on something, result is everything to begin with, and then I go back and mess with it every which way, breaking stuff to figure out the mechanics behind the scene.<br /><br />Your post got me there making it work. Django can be like Linux - great x10^6, but it&#39;s possible to lose a lot of people because the knowledge needed to be a self-helper is a barrier too many people won&#39;t manage to cross. There&#39;s no shame in making something clear (and wsgi/django usage is not clear to anyone without making an investment we don&#39;t all have time for). Seems you had the time and inclination - and I thank your for this effort, even it if is a workaround as you say.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1294369993403#c7818466370226130283' title='comment permalink'>
January 7, 2011 at 2:13&#8239;PM
</a>
<span class='item-control blog-admin pid-1937302764'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7818466370226130283' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2472971747497961417'>
<a name='c2472971747497961417'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2472971747497961417-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2472971747497961417'>
<p>
@primeq A lot of this could be sorted if someone could just supply me with a relatively small Django site example which exhibits the sort of problem, reasonably reliably, that this alternate way of doing things is fixing. If had that, then could identify the cause and potentially what, if anything, that people are doing wrong and then ensure the Django folks document it as bad practice and prone to failure. Am still waiting though for that example site to be able to do that. :-(
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1294370202452#c2472971747497961417' title='comment permalink'>
January 7, 2011 at 2:16&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2472971747497961417' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c3459031874361029661'>
<a name='c3459031874361029661'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><img src="//resources.blogblog.com/img/blank.gif" width="35" height="35" alt="" title="Anonymous">

</span></div>
Anonymous
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3459031874361029661'>
<p>
It has saved my day =] Thanks so much, it really works fine.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1295271228935#c3459031874361029661' title='comment permalink'>
January 18, 2011 at 12:33&#8239;AM
</a>
<span class='item-control blog-admin pid-159164253'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/3459031874361029661' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5723804049079962075'>
<a name='c5723804049079962075'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03412253648404859888" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5723804049079962075-03412253648404859888"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/03412253648404859888' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5723804049079962075'>
<p>
Please note that there is also an outstanding Django bug (<a href="http://code.djangoproject.com/ticket/12464" rel="nofollow">#12464</a>) which causes URL problems when the WSGI alias is &quot;/path&quot; (i.e., not /) and the URL request path is &quot;/path&quot; (i.e., no trailing slash).  The only solution in that case seems to be to add a redirect in Apache from &quot;/path&quot; to &quot;/path/&quot;.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1295912792906#c5723804049079962075' title='comment permalink'>
January 25, 2011 at 10:46&#8239;AM
</a>
<span class='item-control blog-admin pid-1636903357'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5723804049079962075' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c3009873193137303462'>
<a name='c3009873193137303462'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-3009873193137303462-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-3009873193137303462'>
<p>
David, that bug as I can see though has got nothing to do with what the blog post is about, so not sure why you are mentioning it here.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1295924474504#c3009873193137303462' title='comment permalink'>
January 25, 2011 at 2:01&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/3009873193137303462' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c1925524801436707286'>
<a name='c1925524801436707286'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03412253648404859888" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1925524801436707286-03412253648404859888"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/03412253648404859888' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1925524801436707286'>
<p>
Graham, sorry, you&#39;re right -- my comment was really meant for the Django Integration page on the mod_wsgi wiki, but I could not comment there, and I got to this blog post from a link in that article.  After I tried the solution here and it didn&#39;t solve my problem, I did some more searching and found the Django bug report.  Your blog post has obviously helped a number of people, but I thought you might want to the mention the other issue, since if that&#39;s the problem, the workaround doesn&#39;t involve changing the WSGI script.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1295974160642#c1925524801436707286' title='comment permalink'>
January 26, 2011 at 3:49&#8239;AM
</a>
<span class='item-control blog-admin pid-1636903357'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/1925524801436707286' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c1527851795807331074'>
<a name='c1527851795807331074'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-1527851795807331074-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-1527851795807331074'>
<p>
David, highlighting things like that is what the mod_wsgi mailing list is for. Details of mailing list on mod_wsgi site wiki.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1295992229496#c1527851795807331074' title='comment permalink'>
January 26, 2011 at 8:50&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/1527851795807331074' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c777186946967940324'>
<a name='c777186946967940324'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-777186946967940324-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-777186946967940324'>
<p>
David, I hope you are following my updates on that Django ticket you pointed out. It is frightfully more complicated than you think it is. ;-)
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1296007195911#c777186946967940324' title='comment permalink'>
January 26, 2011 at 12:59&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/777186946967940324' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c969172542604649764'>
<a name='c969172542604649764'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/03412253648404859888" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-969172542604649764-03412253648404859888"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/03412253648404859888' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-969172542604649764'>
<p>
Touche! I hope this issue gets some attention from Django core developers. The docstring of get_script_name() actually makes mention of a DJANGO_USE_POST_REWRITE setting which isn&#39;t even used in the function -- there&#39;s no reference to it anywhere in the code base, nor on the users or developers lists.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1296013705385#c969172542604649764' title='comment permalink'>
January 26, 2011 at 2:48&#8239;PM
</a>
<span class='item-control blog-admin pid-1636903357'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/969172542604649764' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8988721054040052728'>
<a name='c8988721054040052728'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17262933369663372020" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8988721054040052728-17262933369663372020"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="danols">

</a></span></div>
<a href='https://www.blogger.com/profile/17262933369663372020' rel='nofollow'>danols</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8988721054040052728'>
<span class='deleted-comment'>This comment has been removed by a blog administrator.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1297038463555#c8988721054040052728' title='comment permalink'>
February 7, 2011 at 11:27&#8239;AM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/8988721054040052728' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c5127562443760918693'>
<a name='c5127562443760918693'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/17262933369663372020" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5127562443760918693-17262933369663372020"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="danols">

</a></span></div>
<a href='https://www.blogger.com/profile/17262933369663372020' rel='nofollow'>danols</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5127562443760918693'>
<span class='deleted-comment'>This comment has been removed by a blog administrator.</span>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1297057229522#c5127562443760918693' title='comment permalink'>
February 7, 2011 at 4:40&#8239;PM
</a>
<span class='item-control blog-admin '>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/5127562443760918693' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c9137062639923852963'>
<a name='c9137062639923852963'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02418259698216326058" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-9137062639923852963-02418259698216326058"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/02418259698216326058' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9137062639923852963'>
<p>
Dear Graham,<br /><br />Thanks for the excellent blog. I just needed to add the path line of the parent directory of the directory that contains settings.py and everything worked like a charm.<br /><br />Do media files automatically get served by apache once everything is setup? I did not expect this to be the case. Kindly do let me know.<br /><br />Thanks once again.<br /><br />Yours sincerely,<br />nav
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1301392469000#c9137062639923852963' title='comment permalink'>
March 29, 2011 at 8:54&#8239;PM
</a>
<span class='item-control blog-admin pid-1422548815'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/9137062639923852963' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c2585853726340624601'>
<a name='c2585853726340624601'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2585853726340624601-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2585853726340624601'>
<p>
If you have any further issues/comments with this blog post, please use the mod_wsgi mailing list. Thanks.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1301393663431#c2585853726340624601' title='comment permalink'>
March 29, 2011 at 9:14&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2585853726340624601' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8288021462262267137'>
<a name='c8288021462262267137'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13593167762436347096" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8288021462262267137-13593167762436347096"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/13593167762436347096' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8288021462262267137'>
<p>
I&#39;m unable to completely remove the project name from app models imports under apache/wsgi. The projects are named differently in my development and production environments (probably my first mistake), so I need to be able to get the project name entirely out of the codebase.<br /><br />I can take it out completely in my development environment, but not with my apache/wsgi production environment. I&#39;ve tried your recipe above, and no dice.<br /><br />I have this same problem too.<br />---------------------<br /><a href="http://alliancelevelingguidex.com/" rel="nofollow">alliance leveling guide</a>
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1302896016338#c8288021462262267137' title='comment permalink'>
April 16, 2011 at 5:33&#8239;AM
</a>
<span class='item-control blog-admin pid-332222732'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/8288021462262267137' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c8401443832315031406'>
<a name='c8401443832315031406'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/00922058885729547123" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-8401443832315031406-00922058885729547123"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="ruffyleaf">

</a></span></div>
<a href='https://www.blogger.com/profile/00922058885729547123' rel='nofollow'>ruffyleaf</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-8401443832315031406'>
<p>
&quot;What would be nice though is if Django simply supplied a WSGI application entry point that could be supplied the site directory and which would internally simply ensure that everything is done correctly so that it behaves the same as the Django development server.&quot;<br /><br />YES!!! The best is if we don&#39;t have to do any configuration at all. At least minimal configuration.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1311924594455#c8401443832315031406' title='comment permalink'>
July 29, 2011 at 5:29&#8239;PM
</a>
<span class='item-control blog-admin pid-1436044272'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/8401443832315031406' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7560149329316983675'>
<a name='c7560149329316983675'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/01146766980742337635" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7560149329316983675-01146766980742337635"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Erik">

</a></span></div>
<a href='https://www.blogger.com/profile/01146766980742337635' rel='nofollow'>Erik</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7560149329316983675'>
<p>
Graham,<br /><br />From your presentation at:<br /><br />http://blip.tv/pycon-australia/getting-started-with-apache-mod_wsgi-3859481<br /><br />you seemed to hope that future Django releases might make this preloading work unnecessary.  Is this true for Django 1.3.1 with mod_wsgi 3.3.1?<br /><br />Thanks for all your work!<br /><br />Erik
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1332987660256#c7560149329316983675' title='comment permalink'>
March 29, 2012 at 1:21&#8239;PM
</a>
<span class='item-control blog-admin pid-1060126176'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7560149329316983675' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c16387682144101529'>
<a name='c16387682144101529'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-16387682144101529-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-16387682144101529'>
<p>
Erik. They have done some cleanup of WSGI application entry point in latest version. They now generate a wsgi.py file and have eliminated I think the double import. They still don&#39;t preload by way of triggering management commands.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1332987934116#c16387682144101529' title='comment permalink'>
March 29, 2012 at 1:25&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/16387682144101529' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c6958516828007549431'>
<a name='c6958516828007549431'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/02572884823929945682" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6958516828007549431-02572884823929945682"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Marcp">

</a></span></div>
<a href='https://www.blogger.com/profile/02572884823929945682' rel='nofollow'>Marcp</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6958516828007549431'>
<p>
the alternate file you provided isn&#39;t working for me on windows with  apache configured as &quot;Apache/2.2.17 (Win32) mod_ssl/2.2.17 OpenSSL/0.9.8o mod_wsgi/3.3 Python/2.7.6 PHP/5.3.4 mod_perl/2.0.4 Perl/v5.10.1&quot;, I get an error on the &quot;import settings&quot; line, stating &quot;ImportError: No module named settings&quot;
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1387381282737#c6958516828007549431' title='comment permalink'>
December 19, 2013 at 2:41&#8239;AM
</a>
<span class='item-control blog-admin pid-2099851382'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/6958516828007549431' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c136835131585669271'>
<a name='c136835131585669271'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-136835131585669271-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-136835131585669271'>
<p>
This post related to an old version of Django and may not be completely accurate for newer versions of Django. It may not even be appropriate for newer Django versions, so why specifically are you trying it.<br /><br />The code would also possibly be dependent on both the project directory and its parent being on sys.path for module imports to work, something which is discouraged in recent Django versions.<br /><br />Comments on a blog post are also a very bad forum for trying to solve problems. If there is specific reason you are trying this when using mod_wsgi, then use the mod_wsgi mailing list.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1387423540407#c136835131585669271' title='comment permalink'>
December 19, 2013 at 2:25&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/136835131585669271' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c2153896305981055365'>
<a name='c2153896305981055365'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/14537960218786178681" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-2153896305981055365-14537960218786178681"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/14537960218786178681' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-2153896305981055365'>
<p>
I must say that I am incredibly grateful that there are those as yourself out there who take the time to share what they know on a subject.... I thank you profusely for going through this... now I just have to say... Oh my god. Please get to the point! haha. For those of us who just want an enumeration of the differences and how to solve the problem (because we don&#39;t care about being Django mod_wsgi experts and may not ever set up a site like this again) this is a nightmare of overkill information that we just don&#39;t need. in todays incredible overload of information, especially when it comes to developers, this just makes my heart sink and my stomach sick when I have to read something like this to solve such a simple problem. Anyway, I&#39;m sure lots of people out there will flame me for making this comment, and again I really appreciate the work that you have done, but now I get to stay at the office for a few hours while I comb through this post and become an expert on something I don&#39;t need to be in order to solve my simple problem. Ugh.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1460071050926#c2153896305981055365' title='comment permalink'>
April 8, 2016 at 9:17&#8239;AM
</a>
<span class='item-control blog-admin pid-1682515989'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/2153896305981055365' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c7754617003261117209'>
<a name='c7754617003261117209'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7754617003261117209-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7754617003261117209'>
<p>
@Jason Wolfe: If you are still having issues which even necessitate needing to know this I would be surprised. My understanding is that Django versions since this was posted have been changed and so a lot of the information here is not really relevant now. I certainly wouldn&#39;t be copy and pasting any code snippets from here to use and expect them to work with newer Django versions.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1460072421587#c7754617003261117209' title='comment permalink'>
April 8, 2016 at 9:40&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7754617003261117209' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c4591807964839190669'>
<a name='c4591807964839190669'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/18178398090986864757" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-4591807964839190669-18178398090986864757"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Da Tijuca pra Albuquerque">

</a></span></div>
<a href='https://www.blogger.com/profile/18178398090986864757' rel='nofollow'>Da Tijuca pra Albuquerque</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-4591807964839190669'>
<p>
@Graham Dumpleton I&#39;m grateful too for you and this posting. (In)fortunately, like you mention much has changed since, but I&#39;m still having problems with getting my application URLs included by Django and served by mod_wsgi. I cannot find help. Could you point me to a newer posting or solution? It runs great witn runserver.<br /><br />Thanks!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1481763448365#c4591807964839190669' title='comment permalink'>
December 15, 2016 at 11:57&#8239;AM
</a>
<span class='item-control blog-admin pid-815880834'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/4591807964839190669' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c835761386797976865'>
<a name='c835761386797976865'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-835761386797976865-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-835761386797976865'>
<p>
If it is related to Django, possibly better to ask on StackOverflow or the Django users mailing list. If it is a mod_wsgi issue, use the mod_wsgi mailing list.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html?showComment=1481764111588#c835761386797976865' title='comment permalink'>
December 15, 2016 at 12:08&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/835761386797976865' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class='comment-footer'>
<a href='https://www.blogger.com/comment/fullpage/post/2363643920942057324/5322237241401383060' onclick=''>Post a Comment</a>
</p>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://blog.dscpl.com.au/2010/03/going-to-singapore-pycon.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://blog.dscpl.com.au/2010/03/dropping-support-for-apache-13-in.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://blog.dscpl.com.au/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://blog.dscpl.com.au/feeds/5322237241401383060/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget Profile' data-version='1' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://www.blogger.com/profile/13609779138164842374' rel='author' style='background-image: url(//www.blogger.com/img/logo-16.png);'>
Graham Dumpleton
</a>
</dt>
</dl>
<a class='profile-link' href='https://www.blogger.com/profile/13609779138164842374' rel='author'>View my complete profile</a>
<div class='clear'></div>
</div>
</div><div class='widget PageList' data-version='1' id='PageList1'>
<h2>Quick Links</h2>
<div class='widget-content'>
<ul>
<li>
<a href='http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html'>Decorators and monkey patching.</a>
</li>
<li>
<a href='http://blog.dscpl.com.au/p/using-python-with-docker.html'>Using Python with Docker.</a>
</li>
</ul>
<div class='clear'></div>
</div>
</div><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<select id='BlogArchive1_ArchiveMenu'>
<option value=''>Blog Archive</option>
<option value='http://blog.dscpl.com.au/2019/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2018/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2018/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2018/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2018/01/'>January (1)</option>
<option value='http://blog.dscpl.com.au/2017/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2016/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2016/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2016/07/'>July (1)</option>
<option value='http://blog.dscpl.com.au/2016/04/'>April (2)</option>
<option value='http://blog.dscpl.com.au/2016/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2016/02/'>February (2)</option>
<option value='http://blog.dscpl.com.au/2016/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2015/12/'>December (6)</option>
<option value='http://blog.dscpl.com.au/2015/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2015/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2015/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2015/06/'>June (5)</option>
<option value='http://blog.dscpl.com.au/2015/05/'>May (7)</option>
<option value='http://blog.dscpl.com.au/2015/04/'>April (4)</option>
<option value='http://blog.dscpl.com.au/2015/03/'>March (4)</option>
<option value='http://blog.dscpl.com.au/2015/01/'>January (2)</option>
<option value='http://blog.dscpl.com.au/2014/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2014/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2014/09/'>September (7)</option>
<option value='http://blog.dscpl.com.au/2014/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2014/05/'>May (1)</option>
<option value='http://blog.dscpl.com.au/2014/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2014/02/'>February (4)</option>
<option value='http://blog.dscpl.com.au/2014/01/'>January (8)</option>
<option value='http://blog.dscpl.com.au/2013/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/10/'>October (4)</option>
<option value='http://blog.dscpl.com.au/2012/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2011/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2011/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2011/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2011/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2011/01/'>January (5)</option>
<option value='http://blog.dscpl.com.au/2010/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2010/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2010/08/'>August (2)</option>
<option value='http://blog.dscpl.com.au/2010/06/'>June (2)</option>
<option value='http://blog.dscpl.com.au/2010/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2010/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2010/03/'>March (3)</option>
<option value='http://blog.dscpl.com.au/2009/11/'>November (4)</option>
<option value='http://blog.dscpl.com.au/2009/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2009/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2009/08/'>August (3)</option>
<option value='http://blog.dscpl.com.au/2009/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2009/04/'>April (5)</option>
<option value='http://blog.dscpl.com.au/2009/03/'>March (5)</option>
<option value='http://blog.dscpl.com.au/2009/02/'>February (1)</option>
<option value='http://blog.dscpl.com.au/2008/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2008/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2008/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2007/11/'>November (2)</option>
<option value='http://blog.dscpl.com.au/2007/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2007/09/'>September (3)</option>
<option value='http://blog.dscpl.com.au/2007/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2007/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2007/03/'>March (2)</option>
</select>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Label' data-version='1' id='Label1'>
<h2>Labels</h2>
<div class='widget-content list-label-widget-content'>
<ul>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/python'>python</a>
<span dir='ltr'>(111)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_wsgi'>mod_wsgi</a>
<span dir='ltr'>(86)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wsgi'>wsgi</a>
<span dir='ltr'>(58)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/apache'>apache</a>
<span dir='ltr'>(35)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/docker'>docker</a>
<span dir='ltr'>(34)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/openshift'>openshift</a>
<span dir='ltr'>(26)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/decorators'>decorators</a>
<span dir='ltr'>(15)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/django'>django</a>
<span dir='ltr'>(13)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/kubernetes'>kubernetes</a>
<span dir='ltr'>(12)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_python'>mod_python</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/red%20hat'>red hat</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/ipython'>ipython</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyterhub'>jupyterhub</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/new%20relic'>new relic</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wrapt'>wrapt</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/pycon'>pycon</a>
<span dir='ltr'>(5)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/s2i'>s2i</a>
<span dir='ltr'>(4)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/gunicorn'>gunicorn</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/uWSGI'>uWSGI</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/datadog'>datadog</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/nginx'>nginx</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/statsd'>statsd</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/web2py'>web2py</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/async'>async</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/dyndns53'>dyndns53</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/fastcgi'>fastcgi</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/heroku'>heroku</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyter'>jupyter</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/lektor'>lektor</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/php'>php</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/shiv'>shiv</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/testing'>testing</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/tornado'>tornado</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/warpdrive'>warpdrive</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/zipapp'>zipapp</a>
<span dir='ltr'>(1)</span>
</li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot section' id='footer-1'><div class='widget AdSense' data-version='1' id='AdSense1'>
<div class='widget-content'>
<script type="text/javascript"><!--
google_ad_client="pub-6433235630058377";
google_ad_host="pub-1556223355139109";
google_ad_width=120;
google_ad_height=600;
google_ad_format="120x600_as";
google_ad_type="text";
google_ad_host_channel="0001";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="999999";
google_color_url="5588AA";
google_color_text="666666";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class='clear'></div>
</div>
</div></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-2'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot no-items section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot no-items section' id='footer-2-2'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3' name='Footer'><div class='widget Attribution' data-version='1' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Simple theme. Powered by <a href='https://www.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/552934507-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY76NHRanfaS-Rmn7rgGT_ll345iUA:1757388508251';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d2363643920942057324','//blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html','2363643920942057324');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '2363643920942057324', 'title': 'Graham Dumpleton', 'url': 'http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html', 'canonicalUrl': 'http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html', 'homepageUrl': 'http://blog.dscpl.com.au/', 'searchUrl': 'http://blog.dscpl.com.au/search', 'canonicalHomepageUrl': 'http://blog.dscpl.com.au/', 'blogspotFaviconUrl': 'http://blog.dscpl.com.au/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': true, 'httpsEnabled': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Graham Dumpleton - RSS\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/2363643920942057324/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/5322237241401383060/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseClientId': 'ca-pub-6433235630058377', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': true, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/b4594f574ba3c273', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'X', 'key': 'twitter', 'shareMessage': 'Share to X', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '5322237241401383060', 'pageName': 'An improved WSGI script for use with Django.', 'pageTitle': 'Graham Dumpleton: An improved WSGI script for use with Django.'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'Simple', 'localizedName': 'Simple', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false, 'variant': 'pale', 'variantId': 'pale'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'An improved WSGI script for use with Django.', 'description': 'Far too often one sees complaints on the Django users list and #django IRC channel that code that worked fine with the Django development se...', 'url': 'http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 5322237241401383060}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/3842676126-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/828616780-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PageListView', new _WidgetInfo('PageList1', 'sidebar-right-1', document.getElementById('PageList1'), {'title': 'Quick Links', 'links': [{'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html', 'id': '3350721465154129789', 'title': 'Decorators and monkey patching.'}, {'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/using-python-with-docker.html', 'id': '5591286857776935907', 'title': 'Using Python with Docker.'}], 'mobile': false, 'showPlaceholder': true, 'hasCurrentPage': false}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar-right-1', document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense1', 'footer-1', document.getElementById('AdSense1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>
</body>
</html>