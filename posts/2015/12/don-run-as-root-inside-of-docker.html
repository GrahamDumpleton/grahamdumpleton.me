<!DOCTYPE html>
<html class='v2' dir='ltr' lang='en'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/2508126174-css_bundle_v2.css' rel='stylesheet' type='text/css'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='http://blog.dscpl.com.au/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Graham Dumpleton - RSS" href="http://blog.dscpl.com.au/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Graham Dumpleton - Atom" href="https://draft.blogger.com/feeds/2363643920942057324/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/3912131919770047395/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html' property='og:url'/>
<meta content='Don&amp;#39;t run as root inside of Docker containers.' property='og:title'/>
<meta content='When we run any applications directly on our own computers we avoid doing so as the ‘root’ user unless absolutely necessary. Not running app...' property='og:description'/>
<title>Graham Dumpleton: Don&#39;t run as root inside of Docker containers.</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Blogger
URL:      www.blogger.com
----------------------------------------------- */
/* Content
----------------------------------------------- */
body {
font: normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
background: #66bbdd none repeat scroll top left;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2187bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #32aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #3299bb;
text-shadow: -1px -1px 1px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #3299bb;
}
.Header .description {
font-size: 140%;
color: #777777;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 1px solid #eeeeee;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #eeeeee;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.tabs-inner .widget ul {
background: #f5f5f5 url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png) repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #eeeeee;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #999999;
border-left: 1px solid #ffffff;
border-right: 1px solid #eeeeee;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #eeeeee;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #eeeeee;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #eeeeee;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: transparent;
color: #222222;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #222222;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #f9f9f9;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #eeeeee;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #f9f9f9;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #eeeeee;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #222222;
}
.mobile-link-button {
background-color: #2187bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid #eeeeee;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #eeeeee;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1020px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1020px;
max-width: 1020px;
_width: 1020px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 200px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 200px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("200px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 200px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 200px;
margin-right: -200px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
body#layout div.add_widget {
padding: 8px;
}
body#layout div.add_widget a {
margin-left: 32px;
}
--></style>
<link href='https://draft.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://draft.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<!-- data-ad-client=ca-pub-6433235630058377 -->

</head>
<body class='loading variant-pale'>
<div class='navbar section' id='navbar' name='Navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://draft.blogger.com/navbar/2363643920942057324?po\x3d3912131919770047395\x26origin\x3dhttp://blog.dscpl.com.au',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header' name='Header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://blog.dscpl.com.au/'>
Graham Dumpleton
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs no-items section' id='crosscol' name='Cross-Column'></div>
<div class='tabs no-items section' id='crosscol-overflow' name='Cross-Column 2'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main' name='Main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Friday, December 18, 2015</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='2363643920942057324' itemprop='blogId'/>
<meta content='3912131919770047395' itemprop='postId'/>
<a name='3912131919770047395'></a>
<h3 class='post-title entry-title' itemprop='name'>
Don&#39;t run as root inside of Docker containers.
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-3912131919770047395' itemprop='description articleBody'>
<p>When we run any applications directly on our own computers we avoid doing so as the &#8216;root&#8217; user unless absolutely necessary. Not running applications as the &#8216;root&#8217; user is viewed as being a best security practice. Yet when we run applications inside of a Docker container, most people seem to have no qualms at all about running everything as the &#8216;root&#8217; user.</p>
<p>Yes it can be argued that the application is isolated within a container and shouldn&#8217;t be able to break out, but it is still running with the privileges of &#8216;root&#8217; regardless. If for some reason, be it a bug in Docker or the operating system itself, a misconfigured Docker installation or even that incorrect access rights were granted to some resource when running a specific container, running as &#8216;root&#8217; is going to increase the risk of an application being able to access outside of the container, directly or indirectly, with elevated privileges.</p>
<p>Although there is a minor note in the <a href="https://docs.docker.com/engine/articles/dockerfile_best-practices/#user">Docker best practices guide</a> about not running as &#8216;root&#8217;, it doesn&#8217;t get emphasised enough. This will no doubt change over time and be seen more importantly as a best practice to follow. It is therefore better now to start designing your Docker images so that they can be run as a non &#8216;root&#8217; user.</p>
<p>Even now some hosting services based around Docker are restricting applications running inside of a Docker container from running as the &#8216;root&#8217; user and forcing them to run as a non privileged user. This is the case with OpenShift 3, but as similar services around Docker seek to limit their exposure to the risk of running as the &#8216;root&#8217; user, even though inside of a container, you can expect them to do the same.</p>
<p>It is recognised as a big enough issue that I believe there are changes in train for the introduction of new features in Docker to reduce the risk. This is coming in the form of support for user namespaces. This is where although within a container it will appear that an application runs as the &#8216;root&#8217; user and with the privileges of &#8216;root&#8217; within the container, when seen from outside of the container it will in reality be running as a non privileged user.</p>
<p>So when this becomes a part of Docker and regarded as stable, hosting services using Docker will be able to use that. In the interim, but then even with that coming down the pipeline, it is still preferable to simply not require your application to run as &#8216;root&#8217; inside of a Docker container.</p>
<h1>Root access via the file system</h1>
<p>Although I am sure people will suggest this is a contrived example with limited application to only certain Docker installation types, I am going to show one example where running as &#8216;root&#8217; in the Docker container can lead to being able to compromise the host that the Docker service is running on.</p>
<p>To do this I am going to rely on the use of volume mounting. What I am going to do may well not be something that any sane person would do, but it highlights the fact that when running as the &#8216;root&#8217; user within a container, it is currently truly the &#8216;root&#8217; user even when seen from outside of the container.</p>
<p>For this demonstration I am going to use Docker Toolbox on MacOS X. The &#8216;docker version&#8217; command indicates I have:</p>
<blockquote>
<pre>$ docker version<br />Client:<br /> Version: 1.9.1<br /> API version: 1.21<br /> Go version: go1.4.3<br /> Git commit: a34a1d5<br /> Built: Fri Nov 20 17:56:04 UTC 2015<br /> OS/Arch: darwin/amd64</pre>
<pre>Server:<br /> Version: 1.9.1<br /> API version: 1.21<br /> Go version: go1.4.3<br /> Git commit: a34a1d5<br /> Built: Fri Nov 20 17:56:04 UTC 2015<br /> OS/Arch: linux/amd64</pre>
</blockquote>
<p>Lets start out by using the official &#8216;busybox&#8217; image to fire up a shell inside of a container.</p>
<blockquote>
<pre>$ docker run --rm -it busybox sh<br /><br />/ # ls -las<br />total 44<br /> 4 drwxr-xr-x 19 root root 4096 Dec 18 07:55 .<br /> 4 drwxr-xr-x 19 root root 4096 Dec 18 07:55 ..<br /> 0 -rwxr-xr-x 1 root root 0 Dec 18 07:55 .dockerenv<br /> 0 -rwxr-xr-x 1 root root 0 Dec 18 07:55 .dockerinit<br /> 12 drwxr-xr-x 2 root root 12288 Oct 31 17:14 bin<br /> 0 drwxr-xr-x 5 root root 380 Dec 18 07:55 dev<br /> 4 drwxr-xr-x 2 root root 4096 Dec 18 07:55 etc<br /> 4 drwxr-xr-x 3 root root 4096 Oct 31 17:15 home<br /> 0 dr-xr-xr-x 129 root root 0 Dec 18 07:55 proc<br /> 4 drwxr-xr-x 2 root root 4096 Dec 18 07:55 root<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 07:55 sys<br /> 4 drwxrwxrwt 2 root root 4096 Oct 31 17:15 tmp<br /> 4 drwxr-xr-x 3 root root 4096 Oct 31 17:15 usr<br /> 4 drwxr-xr-x 4 root root 4096 Oct 31 17:15 var</pre>
</blockquote>
<p>Now lets do that again, but lets mount the file system of the Docker host inside of the container.</p>
<blockquote>
<pre>$ docker run --rm -it -v /:/rootfs busybox sh<br /><br />/ # ls -las<br />total 44<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 07:56 .<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 07:56 ..<br /> 0 -rwxr-xr-x 1 root root 0 Dec 18 07:56 .dockerenv<br /> 0 -rwxr-xr-x 1 root root 0 Dec 18 07:56 .dockerinit<br /> 12 drwxr-xr-x 2 root root 12288 Oct 31 17:14 bin<br /> 0 drwxr-xr-x 5 root root 380 Dec 18 07:56 dev<br /> 4 drwxr-xr-x 2 root root 4096 Dec 18 07:56 etc<br /> 4 drwxr-xr-x 3 root root 4096 Oct 31 17:15 home<br /> 0 dr-xr-xr-x 129 root root 0 Dec 18 07:56 proc<br /> 4 drwxr-xr-x 2 root root 4096 Dec 18 07:56 root<br /> 0 drwxr-xr-x 17 1001 staff 420 Dec 18 00:27 rootfs<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 07:56 sys<br /> 4 drwxrwxrwt 2 root root 4096 Oct 31 17:15 tmp<br /> 4 drwxr-xr-x 3 root root 4096 Oct 31 17:15 usr<br /> 4 drwxr-xr-x 4 root root 4096 Oct 31 17:15 var<br /><br />/ # ls -las /rootfs<br />total 8<br /> 0 drwxr-xr-x 17 1001 staff 420 Dec 18 00:27 .<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 07:56 ..<br /> 0 drwxr-xr-x 1 1000 staff 204 Nov 12 00:41 Users<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt<br /> 0 dr-xr-xr-x 129 root root 0 Dec 18 00:26 proc<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var</pre>
</blockquote>
<p>When the &#8216;-v&#8217; option is used with &#8216;docker run&#8217; it by default mounts the file system read/write.</p>
<p>Using &#8216;-v /:/rootfs&#8217; I have therefore mounted the root file system of the Docker host, in this case running inside of the VM started by Docker Toolbox, inside of the container at the location &#8216;/rootfs&#8217;.</p>
<p>To show that it is indeed the file system of the Docker host we can &#8216;ssh&#8217; into the Docker host and create a temporary file in the root directory of the filesystem.</p>
<blockquote>
<pre>$ docker-machine ssh default<br /> ## .<br /> ## ## ## ==<br /> ## ## ## ## ## ===<br /> /"""""""""""""""""\___/ ===<br /> ~~~ {~~ ~~~~ ~~~ ~~~~ ~~~ ~ / ===- ~~~<br /> \______ o __/<br /> \ \ __/<br /> \____\_______/<br /> _ _ ____ _ _<br />| |__ ___ ___ | |_|___ \ __| | ___ ___| | _____ _ __<br />| '_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '__|<br />| |_) | (_) | (_) | |_ / __/ (_| | (_) | (__| &lt; __/ |<br />|_.__/ \___/ \___/ \__|_____\__,_|\___/ \___|_|\_\___|_|<br />Boot2Docker version 1.9.1, build master : cef800b - Fri Nov 20 19:33:59 UTC 2015<br />Docker version 1.9.1, build a34a1d5<br /><br />docker@default:~$ cd /<br /><br />docker@default:/$ ls -las<br />total 4<br /> 0 drwxr-xr-x 17 tc staff 420 Dec 18 08:05 ./<br /> 0 drwxr-xr-x 17 tc staff 420 Dec 18 08:05 ../<br /> 0 drwxr-xr-x 1 docker staff 204 Nov 12 00:41 Users/<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin/<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev/<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc/<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home/<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib/<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib/<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt/<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt/<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc/<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root/<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run/<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin/<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys/<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp/<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr/<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var/<br /><br />docker@default:/$ sudo touch FROMDOCKERHOST<br /><br />docker@default:/$ ls -las<br />total 4<br /> 0 drwxr-xr-x 17 tc staff 440 Dec 18 08:06 ./<br /> 0 drwxr-xr-x 17 tc staff 440 Dec 18 08:06 ../<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 docker staff 204 Nov 12 00:41 Users/<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin/<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev/<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc/<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home/<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib/<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib/<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt/<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt/<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc/<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root/<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run/<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin/<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys/<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp/<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr/<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var/</pre>
</blockquote>
<p>Switching back to our shell running inside of the container and listing what is in the mounted &#8216;/rootfs&#8217; directory we can see the file which was created.</p>
<blockquote>
<pre>/ # ls -las /rootfs<br />total 8<br /> 0 drwxr-xr-x 17 1001 staff 440 Dec 18 08:06 .<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 07:56 ..<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 1000 staff 204 Nov 12 00:41 Users<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var</pre>
</blockquote>
<p>Now lets try updating the same file system from within the container.</p>
<blockquote>
<pre>/ # touch /rootfs/FROMCONTAINER<br /><br />/ # ls -las /rootfs<br />total 8<br /> 0 drwxr-xr-x 17 1001 staff 460 Dec 18 08:13 .<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 08:13 ..<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:13 FROMCONTAINER<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 1000 staff 204 Nov 12 00:41 Users<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var</pre>
</blockquote>
<p>And finally checking that we can see the change from the Docker host.</p>
<blockquote>
<pre>docker@default:/$ ls -las<br />total 4<br /> 0 drwxr-xr-x 17 tc staff 460 Dec 18 08:13 ./<br /> 0 drwxr-xr-x 17 tc staff 460 Dec 18 08:13 ../<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:13 FROMCONTAINER<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 docker staff 204 Nov 12 00:41 Users/<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin/<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev/<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc/<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home/<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib/<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib/<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt/<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt/<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc/<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root/<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run/<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin/<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys/<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp/<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr/<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var/</pre>
</blockquote>
<p>Take note here that the file we were able to create from the Docker container on the Docker host file system is owned by &#8216;root&#8217;. Thus ownership of the file at least was preserved when created.</p>
<p>Lets try something a bit more complicated. From inside of the Docker container, lets make a copy of the program &#8216;/usr/bin/whoami&#8217; and modify the permissions of the copy so that it should run as a &#8216;setuid' executable.</p>
<blockquote>
<pre>/ # cp /rootfs/usr/bin/whoami /rootfs/whoami<br /><br />/ # chmod 4711 /rootfs/whoami<br /><br />/ # ls -las /rootfs<br />total 536<br /> 0 drwxr-xr-x 17 1001 staff 480 Dec 18 08:17 .<br /> 4 drwxr-xr-x 20 root root 4096 Dec 18 08:13 ..<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:13 FROMCONTAINER<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 1000 staff 204 Nov 12 00:41 Users<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var<br /> 528 -rws--x--x 1 root root 539203 Dec 18 08:17 whoami</pre>
</blockquote>
<p>Note how the permissions for the user are now &#8216;rws&#8217; on the copy of the &#8216;whoami&#8217; executable we made.</p>
<p>This &#8217;s&#8217; indicates that it is now a &#8216;setuid&#8217; executable. This means that when we run that program it should run with the privileges of the user that is the owner of the program, rather than the privileges of the user running the program.</p>
<p>But will that actually be what occurs if we now run the copy of the program from the Docker host given that we made the copy and set the permissions from inside of the Docker container.</p>
<blockquote>
<pre>docker@default:/$ ls -las<br />total 532<br /> 0 drwxr-xr-x 17 tc staff 480 Dec 18 08:17 ./<br /> 0 drwxr-xr-x 17 tc staff 480 Dec 18 08:17 ../<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:13 FROMCONTAINER<br /> 0 -rw-r--r-- 1 root root 0 Dec 18 08:06 FROMDOCKERHOST<br /> 0 drwxr-xr-x 1 docker staff 204 Nov 12 00:41 Users/<br /> 0 drwxr-xr-x 2 root root 1500 Dec 18 00:27 bin/<br /> 0 drwxrwxr-x 14 root staff 4400 Dec 18 00:27 dev/<br /> 0 drwxr-xr-x 12 root root 1040 Dec 18 00:27 etc/<br /> 0 drwxrwxr-x 3 root staff 60 Dec 18 00:27 home/<br /> 4 -rwxr-xr-x 1 root root 496 Nov 20 19:34 init<br /> 0 drwxr-xr-x 5 root root 860 Dec 18 00:27 lib/<br /> 0 lrwxrwxrwx 1 root root 3 Dec 18 00:27 lib64 -&gt; lib/<br /> 0 lrwxrwxrwx 1 root root 11 Dec 18 00:27 linuxrc -&gt; bin/busybox<br /> 0 drwxr-xr-x 4 root root 80 Dec 18 00:27 mnt/<br /> 0 drwxrwsr-x 2 root staff 180 Dec 18 00:27 opt/<br /> 0 dr-xr-xr-x 131 root root 0 Dec 18 00:26 proc/<br /> 0 drwxrwxr-x 2 root staff 80 Dec 18 00:27 root/<br /> 0 drwxrwxr-x 4 root staff 80 Dec 18 00:27 run/<br /> 0 drwxrwxr-x 2 root root 1400 Dec 18 00:27 sbin/<br /> 0 dr-xr-xr-x 13 root root 0 Dec 18 00:27 sys/<br /> 0 lrwxrwxrwx 1 root root 13 Dec 18 00:27 tmp -&gt; /mnt/sda1/tmp/<br /> 0 drwxr-xr-x 7 root root 140 Dec 18 00:27 usr/<br /> 0 drwxrwxr-x 9 root staff 200 Dec 18 00:27 var/<br /> 528 -rws--x--x 1 root root 539203 Dec 18 08:17 whoami<br /><br />docker@default:/$ /usr/bin/whoami<br />docker<br /><br />docker@default:/$ /whoami<br />root</pre>
</blockquote>
<p>And yes it does.</p>
<p>So what we have been able to do is modify the permissions of a program on the Docker host through the volume mount.</p>
<p>Sure, no one should every really be mounting the root filesystem of the Docker host read/write inside of a container and so this really comes down to being a configuration issue, but if that did inadvertently happen for some reason, it means that arbitrary changes could be made to the Docker host file system.</p>
<p>I could have gone and replaced arbitrary executables, modified system startup scripts, or taken a copy of the &#8216;sh&#8217; program and turned it into a &#8216;setuid&#8217; executable so that a non &#8216;root' user on the Docker host could become &#8216;root&#8217;.</p>
<p>As noted I am using Docker Toolbox and it may well be the case that it isn&#8217;t locked down in as secure a manner as your typical Docker service, but it was still possible with its configuration at least. The fact that you can &#8216;ssh&#8217; into the Docker host created by Docker Toolbox and then &#8216;sudo&#8217; to &#8216;root&#8217; also makes it a moot point as well.</p>
<p>Anyway, the point I am trying to illustrate is that when running as &#8216;root&#8217; inside of the container you truly are &#8216;root&#8217;, so if you can escape the container in some way you could well be able to get elevated privileges.</p>
<p>So why risk it? Run your containers as a non &#8216;root&#8217; user in the first place and you remove one element of risk that anyone able to access the container could somehow break out of the container with &#8216;root&#8217; privileges.</p>
<h1>Running containers as non root user</h1>
<p>If you are the developer of a Docker image, the first thing you can therefore do is make sure that you at least use the &#8216;USER&#8217; statement to indicate what non root user an application should run as when the container is started.</p>
<p>In doing this you will have to be very mindful of how you set up file system permissions so that your application can write to any file system directory it might still want to have write access to.</p>
<p>Even then it becomes tricky as when a container is run, the user that is specified by the &#8216;USER&#8217; statement can still be overridden using the &#8216;-u&#8217; option to &#8216;docker run&#8217;. If this is done, even though you may have fixed up filesystem permission so they match the user specified by the &#8216;USER&#8217; statement, then your application could still fail.</p>
<p>It was the overriding of the user that the container ran as that was in part the issue I described in my <a href="http://blog.dscpl.com.au/2015/12/running-ipython-as-docker-container.html">last blog post</a> about trying to run the IPython Docker image called &#8216;jupyter/notebook&#8217; under OpenShift. In order to prohibit applications from running as &#8216;root&#8217; in a Docker container, OpenShift uses the &#8216;-u&#8217; option to &#8216;docker run&#8217; to override the user to be a non privileged user.</p>
<p>In my next blog post I will delve more into the &#8216;-u&#8217; option of &#8216;docker run&#8217;, what it does and the complications it causes. We will also return back to our IPython example in illustrating those issues.</p>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://draft.blogger.com/profile/13609779138164842374' itemprop='url'/>
<a class='g-profile' href='https://draft.blogger.com/profile/13609779138164842374' rel='author' title='author profile'>
<span itemprop='name'>Graham Dumpleton</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html' itemprop='url'/>
<a class='timestamp-link' href='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2015-12-18T21:04:00+11:00'>9:04&#8239;PM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://draft.blogger.com/email-post/2363643920942057324/3912131919770047395' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://draft.blogger.com/share-post.g?blogID=2363643920942057324&postID=3912131919770047395&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://draft.blogger.com/share-post.g?blogID=2363643920942057324&postID=3912131919770047395&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://draft.blogger.com/share-post.g?blogID=2363643920942057324&postID=3912131919770047395&target=twitter' target='_blank' title='Share to X'><span class='share-button-link-text'>Share to X</span></a><a class='goog-inline-block share-button sb-facebook' href='https://draft.blogger.com/share-post.g?blogID=2363643920942057324&postID=3912131919770047395&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://draft.blogger.com/share-post.g?blogID=2363643920942057324&postID=3912131919770047395&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
Labels:
<a href='http://blog.dscpl.com.au/search/label/docker' rel='tag'>docker</a>,
<a href='http://blog.dscpl.com.au/search/label/openshift' rel='tag'>openshift</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>2 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author ' id='c5156159117215840087'>
<a name='c5156159117215840087'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://draft.blogger.com/profile/15506900662710573099" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-5156159117215840087-15506900662710573099"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://draft.blogger.com/profile/15506900662710573099' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-5156159117215840087'>
<p>
So if you explicitly mount root fs and explicitly give all permissions to write in that root fs, the one who has been given those permissions may write in that root fs because he has been given permissions to do so.<br />Well that&#39;s a terrific surprise.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html?showComment=1509709952226#c5156159117215840087' title='comment permalink'>
November 3, 2017 at 10:52&#8239;PM
</a>
<span class='item-control blog-admin pid-411112558'>
<a class='comment-delete' href='https://draft.blogger.com/comment/delete/2363643920942057324/5156159117215840087' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c344857184951462456'>
<a name='c344857184951462456'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://draft.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-344857184951462456-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://draft.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-344857184951462456'>
<p>
What you are ignoring is that when someone has root privilege from a normal user, you would still need to use &#39;sudo&#39; to execute a command as root and supply a password.<br /><br />Where a normal user has been setup to use Docker without becoming root to use &#39;docker run&#39;, the method explained means that someone could indirectly still manage to do something as root via Docker without needing to supply a password, albeit it would take a few extra steps.<br /><br />So if you have the ability to run &#39;docker run&#39; from your normal user account, and you left your screen unlocked, it is as good as having left a window open as the root user.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html?showComment=1509751401175#c344857184951462456' title='comment permalink'>
November 4, 2017 at 10:23&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://draft.blogger.com/comment/delete/2363643920942057324/344857184951462456' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class='comment-footer'>
<a href='https://draft.blogger.com/comment/fullpage/post/2363643920942057324/3912131919770047395' onclick=''>Post a Comment</a>
</p>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://blog.dscpl.com.au/2015/12/overriding-user-docker-containers-run-as.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://blog.dscpl.com.au/2015/12/running-ipython-as-docker-container.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://blog.dscpl.com.au/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://blog.dscpl.com.au/feeds/3912131919770047395/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget Profile' data-version='1' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://draft.blogger.com/profile/13609779138164842374' rel='author' style='background-image: url(//draft.blogger.com/img/logo-16.png);'>
Graham Dumpleton
</a>
</dt>
</dl>
<a class='profile-link' href='https://draft.blogger.com/profile/13609779138164842374' rel='author'>View my complete profile</a>
<div class='clear'></div>
</div>
</div><div class='widget PageList' data-version='1' id='PageList1'>
<h2>Quick Links</h2>
<div class='widget-content'>
<ul>
<li>
<a href='http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html'>Decorators and monkey patching.</a>
</li>
<li>
<a href='http://blog.dscpl.com.au/p/using-python-with-docker.html'>Using Python with Docker.</a>
</li>
</ul>
<div class='clear'></div>
</div>
</div><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<select id='BlogArchive1_ArchiveMenu'>
<option value=''>Blog Archive</option>
<option value='http://blog.dscpl.com.au/2019/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2018/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2018/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2018/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2018/01/'>January (1)</option>
<option value='http://blog.dscpl.com.au/2017/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2016/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2016/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2016/07/'>July (1)</option>
<option value='http://blog.dscpl.com.au/2016/04/'>April (2)</option>
<option value='http://blog.dscpl.com.au/2016/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2016/02/'>February (2)</option>
<option value='http://blog.dscpl.com.au/2016/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2015/12/'>December (6)</option>
<option value='http://blog.dscpl.com.au/2015/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2015/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2015/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2015/06/'>June (5)</option>
<option value='http://blog.dscpl.com.au/2015/05/'>May (7)</option>
<option value='http://blog.dscpl.com.au/2015/04/'>April (4)</option>
<option value='http://blog.dscpl.com.au/2015/03/'>March (4)</option>
<option value='http://blog.dscpl.com.au/2015/01/'>January (2)</option>
<option value='http://blog.dscpl.com.au/2014/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2014/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2014/09/'>September (7)</option>
<option value='http://blog.dscpl.com.au/2014/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2014/05/'>May (1)</option>
<option value='http://blog.dscpl.com.au/2014/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2014/02/'>February (4)</option>
<option value='http://blog.dscpl.com.au/2014/01/'>January (8)</option>
<option value='http://blog.dscpl.com.au/2013/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/10/'>October (4)</option>
<option value='http://blog.dscpl.com.au/2012/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2011/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2011/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2011/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2011/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2011/01/'>January (5)</option>
<option value='http://blog.dscpl.com.au/2010/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2010/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2010/08/'>August (2)</option>
<option value='http://blog.dscpl.com.au/2010/06/'>June (2)</option>
<option value='http://blog.dscpl.com.au/2010/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2010/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2010/03/'>March (3)</option>
<option value='http://blog.dscpl.com.au/2009/11/'>November (4)</option>
<option value='http://blog.dscpl.com.au/2009/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2009/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2009/08/'>August (3)</option>
<option value='http://blog.dscpl.com.au/2009/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2009/04/'>April (5)</option>
<option value='http://blog.dscpl.com.au/2009/03/'>March (5)</option>
<option value='http://blog.dscpl.com.au/2009/02/'>February (1)</option>
<option value='http://blog.dscpl.com.au/2008/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2008/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2008/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2007/11/'>November (2)</option>
<option value='http://blog.dscpl.com.au/2007/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2007/09/'>September (3)</option>
<option value='http://blog.dscpl.com.au/2007/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2007/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2007/03/'>March (2)</option>
</select>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Label' data-version='1' id='Label1'>
<h2>Labels</h2>
<div class='widget-content list-label-widget-content'>
<ul>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/python'>python</a>
<span dir='ltr'>(111)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_wsgi'>mod_wsgi</a>
<span dir='ltr'>(86)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wsgi'>wsgi</a>
<span dir='ltr'>(58)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/apache'>apache</a>
<span dir='ltr'>(35)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/docker'>docker</a>
<span dir='ltr'>(34)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/openshift'>openshift</a>
<span dir='ltr'>(26)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/decorators'>decorators</a>
<span dir='ltr'>(15)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/django'>django</a>
<span dir='ltr'>(13)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/kubernetes'>kubernetes</a>
<span dir='ltr'>(12)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_python'>mod_python</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/red%20hat'>red hat</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/ipython'>ipython</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyterhub'>jupyterhub</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/new%20relic'>new relic</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wrapt'>wrapt</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/pycon'>pycon</a>
<span dir='ltr'>(5)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/s2i'>s2i</a>
<span dir='ltr'>(4)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/gunicorn'>gunicorn</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/uWSGI'>uWSGI</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/datadog'>datadog</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/nginx'>nginx</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/statsd'>statsd</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/web2py'>web2py</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/async'>async</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/dyndns53'>dyndns53</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/fastcgi'>fastcgi</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/heroku'>heroku</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyter'>jupyter</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/lektor'>lektor</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/php'>php</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/shiv'>shiv</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/testing'>testing</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/tornado'>tornado</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/warpdrive'>warpdrive</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/zipapp'>zipapp</a>
<span dir='ltr'>(1)</span>
</li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot section' id='footer-1'><div class='widget AdSense' data-version='1' id='AdSense1'>
<div class='widget-content'>
<script type="text/javascript"><!--
google_ad_client="pub-6433235630058377";
google_ad_host="pub-1556223355139109";
google_ad_width=120;
google_ad_height=600;
google_ad_format="120x600_as";
google_ad_type="text";
google_ad_host_channel="0001";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="999999";
google_color_url="5588AA";
google_color_text="666666";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class='clear'></div>
</div>
</div></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-2'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot no-items section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot no-items section' id='footer-2-2'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3' name='Footer'><div class='widget Attribution' data-version='1' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Simple theme. Powered by <a href='https://draft.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/552934507-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY6wf0R2eWp_JfKyv2hsgy8BcHbB-Q:1757388601716';_WidgetManager._Init('//draft.blogger.com/rearrange?blogID\x3d2363643920942057324','//blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html','2363643920942057324');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '2363643920942057324', 'title': 'Graham Dumpleton', 'url': 'http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html', 'canonicalUrl': 'http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html', 'homepageUrl': 'http://blog.dscpl.com.au/', 'searchUrl': 'http://blog.dscpl.com.au/search', 'canonicalHomepageUrl': 'http://blog.dscpl.com.au/', 'blogspotFaviconUrl': 'http://blog.dscpl.com.au/favicon.ico', 'bloggerUrl': 'https://draft.blogger.com', 'hasCustomDomain': true, 'httpsEnabled': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Graham Dumpleton - RSS\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22https://draft.blogger.com/feeds/2363643920942057324/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/3912131919770047395/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseClientId': 'ca-pub-6433235630058377', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': true, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/df4e7af2431b8786', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'X', 'key': 'twitter', 'shareMessage': 'Share to X', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '3912131919770047395', 'pageName': 'Don\x26#39;t run as root inside of Docker containers.', 'pageTitle': 'Graham Dumpleton: Don\x26#39;t run as root inside of Docker containers.'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'Simple', 'localizedName': 'Simple', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false, 'variant': 'pale', 'variantId': 'pale'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Don\x26#39;t run as root inside of Docker containers.', 'description': 'When we run any applications directly on our own computers we avoid doing so as the \u2018root\u2019 user unless absolutely necessary. Not running app...', 'url': 'http://blog.dscpl.com.au/2015/12/don-run-as-root-inside-of-docker.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 3912131919770047395}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/3842676126-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/828616780-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PageListView', new _WidgetInfo('PageList1', 'sidebar-right-1', document.getElementById('PageList1'), {'title': 'Quick Links', 'links': [{'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html', 'id': '3350721465154129789', 'title': 'Decorators and monkey patching.'}, {'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/using-python-with-docker.html', 'id': '5591286857776935907', 'title': 'Using Python with Docker.'}], 'mobile': false, 'showPlaceholder': true, 'hasCurrentPage': false}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar-right-1', document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense1', 'footer-1', document.getElementById('AdSense1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>
</body>
</html>