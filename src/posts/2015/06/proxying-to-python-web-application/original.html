<!DOCTYPE html>
<html class='v2' dir='ltr' lang='en'>
<head>
<link href='https://www.blogger.com/static/v1/widgets/2508126174-css_bundle_v2.css' rel='stylesheet' type='text/css'/>
<meta content='width=1100' name='viewport'/>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
<meta content='blogger' name='generator'/>
<link href='http://blog.dscpl.com.au/favicon.ico' rel='icon' type='image/x-icon'/>
<link href='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html' rel='canonical'/>
<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/posts/default" />
<link rel="alternate" type="application/rss+xml" title="Graham Dumpleton - RSS" href="http://blog.dscpl.com.au/feeds/posts/default?alt=rss" />
<link rel="service.post" type="application/atom+xml" title="Graham Dumpleton - Atom" href="https://www.blogger.com/feeds/2363643920942057324/posts/default" />

<link rel="alternate" type="application/atom+xml" title="Graham Dumpleton - Atom" href="http://blog.dscpl.com.au/feeds/8749217724374558967/comments/default" />
<!--Can't find substitution for tag [blog.ieCssRetrofitLinks]-->
<meta content='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html' property='og:url'/>
<meta content='Proxying to a Python web application running in Docker.' property='og:title'/>
<meta content='I have seen a few questions of late being posed about how to setup Apache to proxy to a Python web application running in a Docker container...' property='og:description'/>
<title>Graham Dumpleton: Proxying to a Python web application running in Docker.</title>
<style id='page-skin-1' type='text/css'><!--
/*
-----------------------------------------------
Blogger Template Style
Name:     Simple
Designer: Blogger
URL:      www.blogger.com
----------------------------------------------- */
/* Content
----------------------------------------------- */
body {
font: normal normal 12px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #222222;
background: #66bbdd none repeat scroll top left;
padding: 0 40px 40px 40px;
}
html body .region-inner {
min-width: 0;
max-width: 100%;
width: auto;
}
h2 {
font-size: 22px;
}
a:link {
text-decoration:none;
color: #2187bb;
}
a:visited {
text-decoration:none;
color: #888888;
}
a:hover {
text-decoration:underline;
color: #32aaff;
}
.body-fauxcolumn-outer .fauxcolumn-inner {
background: transparent none repeat scroll top left;
_background-image: none;
}
.body-fauxcolumn-outer .cap-top {
position: absolute;
z-index: 1;
height: 400px;
width: 100%;
}
.body-fauxcolumn-outer .cap-top .cap-left {
width: 100%;
background: transparent none repeat-x scroll top left;
_background-image: none;
}
.content-outer {
-moz-box-shadow: 0 0 40px rgba(0, 0, 0, .15);
-webkit-box-shadow: 0 0 5px rgba(0, 0, 0, .15);
-goog-ms-box-shadow: 0 0 10px #333333;
box-shadow: 0 0 40px rgba(0, 0, 0, .15);
margin-bottom: 1px;
}
.content-inner {
padding: 10px 10px;
}
.content-inner {
background-color: #ffffff;
}
/* Header
----------------------------------------------- */
.header-outer {
background: transparent none repeat-x scroll 0 -400px;
_background-image: none;
}
.Header h1 {
font: normal normal 60px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #3299bb;
text-shadow: -1px -1px 1px rgba(0, 0, 0, .2);
}
.Header h1 a {
color: #3299bb;
}
.Header .description {
font-size: 140%;
color: #777777;
}
.header-inner .Header .titlewrapper {
padding: 22px 30px;
}
.header-inner .Header .descriptionwrapper {
padding: 0 30px;
}
/* Tabs
----------------------------------------------- */
.tabs-inner .section:first-child {
border-top: 1px solid #eeeeee;
}
.tabs-inner .section:first-child ul {
margin-top: -1px;
border-top: 1px solid #eeeeee;
border-left: 0 solid #eeeeee;
border-right: 0 solid #eeeeee;
}
.tabs-inner .widget ul {
background: #f5f5f5 url(https://resources.blogblog.com/blogblog/data/1kt/simple/gradients_light.png) repeat-x scroll 0 -800px;
_background-image: none;
border-bottom: 1px solid #eeeeee;
margin-top: 0;
margin-left: -30px;
margin-right: -30px;
}
.tabs-inner .widget li a {
display: inline-block;
padding: .6em 1em;
font: normal normal 14px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #999999;
border-left: 1px solid #ffffff;
border-right: 1px solid #eeeeee;
}
.tabs-inner .widget li:first-child a {
border-left: none;
}
.tabs-inner .widget li.selected a, .tabs-inner .widget li a:hover {
color: #000000;
background-color: #eeeeee;
text-decoration: none;
}
/* Columns
----------------------------------------------- */
.main-outer {
border-top: 0 solid #eeeeee;
}
.fauxcolumn-left-outer .fauxcolumn-inner {
border-right: 1px solid #eeeeee;
}
.fauxcolumn-right-outer .fauxcolumn-inner {
border-left: 1px solid #eeeeee;
}
/* Headings
----------------------------------------------- */
div.widget > h2,
div.widget h2.title {
margin: 0 0 1em 0;
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
color: #000000;
}
/* Widgets
----------------------------------------------- */
.widget .zippy {
color: #999999;
text-shadow: 2px 2px 1px rgba(0, 0, 0, .1);
}
.widget .popular-posts ul {
list-style: none;
}
/* Posts
----------------------------------------------- */
h2.date-header {
font: normal bold 11px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
}
.date-header span {
background-color: transparent;
color: #222222;
padding: inherit;
letter-spacing: inherit;
margin: inherit;
}
.main-inner {
padding-top: 30px;
padding-bottom: 30px;
}
.main-inner .column-center-inner {
padding: 0 15px;
}
.main-inner .column-center-inner .section {
margin: 0 15px;
}
.post {
margin: 0 0 25px 0;
}
h3.post-title, .comments h4 {
font: normal normal 22px Arial, Tahoma, Helvetica, FreeSans, sans-serif;
margin: .75em 0 0;
}
.post-body {
font-size: 110%;
line-height: 1.4;
position: relative;
}
.post-body img, .post-body .tr-caption-container, .Profile img, .Image img,
.BlogList .item-thumbnail img {
padding: 2px;
background: #ffffff;
border: 1px solid #eeeeee;
-moz-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
-webkit-box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
box-shadow: 1px 1px 5px rgba(0, 0, 0, .1);
}
.post-body img, .post-body .tr-caption-container {
padding: 5px;
}
.post-body .tr-caption-container {
color: #222222;
}
.post-body .tr-caption-container img {
padding: 0;
background: transparent;
border: none;
-moz-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
-webkit-box-shadow: 0 0 0 rgba(0, 0, 0, .1);
box-shadow: 0 0 0 rgba(0, 0, 0, .1);
}
.post-header {
margin: 0 0 1.5em;
line-height: 1.6;
font-size: 90%;
}
.post-footer {
margin: 20px -2px 0;
padding: 5px 10px;
color: #666666;
background-color: #f9f9f9;
border-bottom: 1px solid #eeeeee;
line-height: 1.6;
font-size: 90%;
}
#comments .comment-author {
padding-top: 1.5em;
border-top: 1px solid #eeeeee;
background-position: 0 1.5em;
}
#comments .comment-author:first-child {
padding-top: 0;
border-top: none;
}
.avatar-image-container {
margin: .2em 0 0;
}
#comments .avatar-image-container img {
border: 1px solid #eeeeee;
}
/* Comments
----------------------------------------------- */
.comments .comments-content .icon.blog-author {
background-repeat: no-repeat;
background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAAd0SU1FB9sLFwMeCjjhcOMAAAD+SURBVDjLtZSvTgNBEIe/WRRnm3U8RC1neQdsm1zSBIU9VVF1FkUguQQsD9ITmD7ECZIJSE4OZo9stoVjC/zc7ky+zH9hXwVwDpTAWWLrgS3QAe8AZgaAJI5zYAmc8r0G4AHYHQKVwII8PZrZFsBFkeRCABYiMh9BRUhnSkPTNCtVXYXURi1FpBDgArj8QU1eVXUzfnjv7yP7kwu1mYrkWlU33vs1QNu2qU8pwN0UpKoqokjWwCztrMuBhEhmh8bD5UDqur75asbcX0BGUB9/HAMB+r32hznJgXy2v0sGLBcyAJ1EK3LFcbo1s91JeLwAbwGYu7TP/3ZGfnXYPgAVNngtqatUNgAAAABJRU5ErkJggg==);
}
.comments .comments-content .loadmore a {
border-top: 1px solid #999999;
border-bottom: 1px solid #999999;
}
.comments .comment-thread.inline-thread {
background-color: #f9f9f9;
}
.comments .continue {
border-top: 2px solid #999999;
}
/* Accents
---------------------------------------------- */
.section-columns td.columns-cell {
border-left: 1px solid #eeeeee;
}
.blog-pager {
background: transparent none no-repeat scroll top center;
}
.blog-pager-older-link, .home-link,
.blog-pager-newer-link {
background-color: #ffffff;
padding: 5px;
}
.footer-outer {
border-top: 0 dashed #bbbbbb;
}
/* Mobile
----------------------------------------------- */
body.mobile  {
background-size: auto;
}
.mobile .body-fauxcolumn-outer {
background: transparent none repeat scroll top left;
}
.mobile .body-fauxcolumn-outer .cap-top {
background-size: 100% auto;
}
.mobile .content-outer {
-webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .15);
box-shadow: 0 0 3px rgba(0, 0, 0, .15);
}
.mobile .tabs-inner .widget ul {
margin-left: 0;
margin-right: 0;
}
.mobile .post {
margin: 0;
}
.mobile .main-inner .column-center-inner .section {
margin: 0;
}
.mobile .date-header span {
padding: 0.1em 10px;
margin: 0 -10px;
}
.mobile h3.post-title {
margin: 0;
}
.mobile .blog-pager {
background: transparent none no-repeat scroll top center;
}
.mobile .footer-outer {
border-top: none;
}
.mobile .main-inner, .mobile .footer-inner {
background-color: #ffffff;
}
.mobile-index-contents {
color: #222222;
}
.mobile-link-button {
background-color: #2187bb;
}
.mobile-link-button a:link, .mobile-link-button a:visited {
color: #ffffff;
}
.mobile .tabs-inner .section:first-child {
border-top: none;
}
.mobile .tabs-inner .PageList .widget-content {
background-color: #eeeeee;
color: #000000;
border-top: 1px solid #eeeeee;
border-bottom: 1px solid #eeeeee;
}
.mobile .tabs-inner .PageList .widget-content .pagelist-arrow {
border-left: 1px solid #eeeeee;
}

--></style>
<style id='template-skin-1' type='text/css'><!--
body {
min-width: 1020px;
}
.content-outer, .content-fauxcolumn-outer, .region-inner {
min-width: 1020px;
max-width: 1020px;
_width: 1020px;
}
.main-inner .columns {
padding-left: 0px;
padding-right: 200px;
}
.main-inner .fauxcolumn-center-outer {
left: 0px;
right: 200px;
/* IE6 does not respect left and right together */
_width: expression(this.parentNode.offsetWidth -
parseInt("0px") -
parseInt("200px") + 'px');
}
.main-inner .fauxcolumn-left-outer {
width: 0px;
}
.main-inner .fauxcolumn-right-outer {
width: 200px;
}
.main-inner .column-left-outer {
width: 0px;
right: 100%;
margin-left: -0px;
}
.main-inner .column-right-outer {
width: 200px;
margin-right: -200px;
}
#layout {
min-width: 0;
}
#layout .content-outer {
min-width: 0;
width: 800px;
}
#layout .region-inner {
min-width: 0;
width: auto;
}
body#layout div.add_widget {
padding: 8px;
}
body#layout div.add_widget a {
margin-left: 32px;
}
--></style>
<link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' media='none' onload='if(media!=&#39;all&#39;)media=&#39;all&#39;' rel='stylesheet'/><noscript><link href='https://www.blogger.com/dyn-css/authorization.css?targetBlogID=2363643920942057324&amp;zx=8e425bf4-e933-49a5-a874-6a5d9cccad39' rel='stylesheet'/></noscript>
<meta name='google-adsense-platform-account' content='ca-host-pub-1556223355139109'/>
<meta name='google-adsense-platform-domain' content='blogspot.com'/>

<!-- data-ad-client=ca-pub-6433235630058377 -->

</head>
<body class='loading variant-pale'>
<div class='navbar section' id='navbar' name='Navbar'><div class='widget Navbar' data-version='1' id='Navbar1'><script type="text/javascript">
    function setAttributeOnload(object, attribute, val) {
      if(window.addEventListener) {
        window.addEventListener('load',
          function(){ object[attribute] = val; }, false);
      } else {
        window.attachEvent('onload', function(){ object[attribute] = val; });
      }
    }
  </script>
<div id="navbar-iframe-container"></div>
<script type="text/javascript" src="https://apis.google.com/js/platform.js"></script>
<script type="text/javascript">
      gapi.load("gapi.iframes:gapi.iframes.style.bubble", function() {
        if (gapi.iframes && gapi.iframes.getContext) {
          gapi.iframes.getContext().openChild({
              url: 'https://www.blogger.com/navbar/2363643920942057324?po\x3d8749217724374558967\x26origin\x3dhttp://blog.dscpl.com.au',
              where: document.getElementById("navbar-iframe-container"),
              id: "navbar-iframe"
          });
        }
      });
    </script><script type="text/javascript">
(function() {
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '//pagead2.googlesyndication.com/pagead/js/google_top_exp.js';
var head = document.getElementsByTagName('head')[0];
if (head) {
head.appendChild(script);
}})();
</script>
</div></div>
<div class='body-fauxcolumns'>
<div class='fauxcolumn-outer body-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content'>
<div class='content-fauxcolumns'>
<div class='fauxcolumn-outer content-fauxcolumn-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<div class='content-outer'>
<div class='content-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left content-fauxborder-left'>
<div class='fauxborder-right content-fauxborder-right'></div>
<div class='content-inner'>
<header>
<div class='header-outer'>
<div class='header-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left header-fauxborder-left'>
<div class='fauxborder-right header-fauxborder-right'></div>
<div class='region-inner header-inner'>
<div class='header section' id='header' name='Header'><div class='widget Header' data-version='1' id='Header1'>
<div id='header-inner'>
<div class='titlewrapper'>
<h1 class='title'>
<a href='http://blog.dscpl.com.au/'>
Graham Dumpleton
</a>
</h1>
</div>
<div class='descriptionwrapper'>
<p class='description'><span>
</span></p>
</div>
</div>
</div></div>
</div>
</div>
<div class='header-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</header>
<div class='tabs-outer'>
<div class='tabs-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left tabs-fauxborder-left'>
<div class='fauxborder-right tabs-fauxborder-right'></div>
<div class='region-inner tabs-inner'>
<div class='tabs no-items section' id='crosscol' name='Cross-Column'></div>
<div class='tabs no-items section' id='crosscol-overflow' name='Cross-Column 2'></div>
</div>
</div>
<div class='tabs-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='main-outer'>
<div class='main-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left main-fauxborder-left'>
<div class='fauxborder-right main-fauxborder-right'></div>
<div class='region-inner main-inner'>
<div class='columns fauxcolumns'>
<div class='fauxcolumn-outer fauxcolumn-center-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-left-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<div class='fauxcolumn-outer fauxcolumn-right-outer'>
<div class='cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left'>
<div class='fauxborder-right'></div>
<div class='fauxcolumn-inner'>
</div>
</div>
<div class='cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<!-- corrects IE6 width calculation -->
<div class='columns-inner'>
<div class='column-center-outer'>
<div class='column-center-inner'>
<div class='main section' id='main' name='Main'><div class='widget Blog' data-version='1' id='Blog1'>
<div class='blog-posts hfeed'>

          <div class="date-outer">
        
<h2 class='date-header'><span>Tuesday, June 30, 2015</span></h2>

          <div class="date-posts">
        
<div class='post-outer'>
<div class='post hentry uncustomized-post-template' itemprop='blogPost' itemscope='itemscope' itemtype='http://schema.org/BlogPosting'>
<meta content='2363643920942057324' itemprop='blogId'/>
<meta content='8749217724374558967' itemprop='postId'/>
<a name='8749217724374558967'></a>
<h3 class='post-title entry-title' itemprop='name'>
Proxying to a Python web application running in Docker.
</h3>
<div class='post-header'>
<div class='post-header-line-1'></div>
</div>
<div class='post-body entry-content' id='post-body-8749217724374558967' itemprop='description articleBody'>
<p>I have seen a few questions of late being posed about how to setup Apache to proxy to a Python web application running in a Docker container. The questions seem to be the result of people who have in the past previously run Apache/mod_wsgi on the host, with potentially multiple Python web applications, now making use of Docker to break out the individual web applications into separate containers.</p>
<p>Because though Apache running on the host was making use of name based virtual hosts, so that only one IP address was required across all the different sites, they need to retain that Apache instance as the termination point. The front end Apache as a result then merely becomes a proxy for the sites which have been separated out into the separate Docker containers.</p>
<p>In this post I am going to explain how name based virtual hosting works and how proxying would be set up when moving the sites into a separate Docker container. I will also explain how to pass through to the sites now running in the containers details about how the site was being accessed to ensure that URLs generated by the web applications, which need to refer back to the same site via its external host name, are correct.</p>
<h1>Name based virtual hosts</h1>
<p>Name based virtual hosts under the HTTP protocol was a mechanism developed to allow many different web sites being accessed by different host names, to be made available on a single machine using only one IP address. The ability to use name based virtual hosts eliminated the need to allocate many IP addresses to the same physical host if wanting to share the resources of the host for many sites.</p>
<p>Because all the sites would have the same IP address, the mechanism relies though on the HTTP request sent by a client including a special &#8216;Host&#8217; header which gives the name of the site the request is being targeted at.</p>
<p>To understand this better lets first look at how the host names themselves would be mapped in DNS.</p>
<p>Imagine to start with that you had acquired a VPS from a service provider which you then setup to run a web server. This VPS would have its own specific IP address allocated to it. In DNS this would have a name associated with it using what is called an A record.</p>
<blockquote>
<pre>host-1234.webhostingservice.com. A 1.2.3.4</pre>
</blockquote>
<p>The host name here could be a generic one which the hosting service would have setup to map to the IP address, it wouldn&#8217;t be related to the specific name of the site you want to run.</p>
<p>For the multiple web sites you now want to host, you need to create a name alias, which says that if your site name is accessed, that the request should actually be sent to the above host on that IP address. This is done in DNS using a CNAME record.</p>
<blockquote>
<pre>www.example.com. CNAME&#160;host-1234.webhostingservice.com.<br />blog.example.com. CNAME&#160;host-1234.webhostingservice.com.<br />wiki.example.com. CNAME&#160;host-1234.webhostingservice.com.</pre>
</blockquote>
<p>So it doesn&#8217;t now matter whether the site &#8216;www.example.com&#8217;, &#8216;blog.example.com&#8217; or &#8216;wiki.example.com&#8217; is accessed, the requests are all sent to the host with name &#8216;host-1234.webhostingservice.com&#8217;, listening on IP address &#8216;1.2.3.4&#8217;.</p>
<p>As we are going to access all these sites using HTTP, then the requests will all arrive at port 80 on that host, being the default port that the web server will listen for HTTP requests.</p>
<p>In order that the web server can distinguish between requests for the three different sites, the HTTP request needs to include the &#8216;Host&#8217; header. Thus, if the web request was destined for &#8216;blog.example.com&#8217;, the HTTP request headers would include:</p>
<blockquote>
<pre>Host: blog.example.com</pre>
</blockquote>
<h1>Apache virtual hosts</h1>
<p>The next part of the puzzle is how Apache deals with these requests and knows which of the multiple sites it needs to be routed to.</p>
<p>This is managed in Apache by setting up multiple &#8216;VirtualHost&#8217; definitions. Within each of the &#8216;VirtualHost&#8217; definitions would be placed the configuration specific to that site. In the case of using mod_wsgi, you would then end up with something like:</p>
<blockquote>
<pre>&lt;VirtualHost _default_:80&gt;<br />Require all denied<br />&lt;/VirtualHost&gt;</pre>
<pre># www.example.com<br /><br />&lt;VirtualHost *:80&gt;<br />ServerName www.example.com</pre>
<pre>WSGIDaemonProcess www.example.com</pre>
<pre>WSGIScriptAlias / /some/path/www.example.com/site.wsgi \<br />    process-group=www.example.com application-group=%{GLOBAL}</pre>
<pre>&lt;Directory /some/path/www.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</pre>
<pre># blog.example.com<br /><br />&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>WSGIDaemonProcess blog.example.com</pre>
<pre>WSGIScriptAlias / /some/path/blog.example.com/site.wsgi \<br />    process-group=blog.example.com application-group=%{GLOBAL}</pre>
<pre>&lt;Directory /some/path/blog.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</pre>
<pre># wiki.example.com<br /><br />&lt;VirtualHost *:80&gt;<br />ServerName wiki.example.com</pre>
<pre>WSGIDaemonProcess wiki.example.com</pre>
<pre>WSGIScriptAlias / /some/path/wiki.example.com/site.wsgi \<br />    process-group=wiki.example.com application-group=%{GLOBAL}</pre>
<pre>&lt;Directory /some/path/wiki.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>That is, we have three &#8216;VirtualHost&#8217; definitions corresponding to each site, with all of them being setup as being linked to port 80, the default HTTP port.</p>
<p>What differs in each &#8216;VirtualHost&#8217; is the value of the &#8216;ServerName&#8217; directive. It is this directive which specifies what the site host name is for that specific &#8216;VirtualHost&#8217;.</p>
<p>When a request is now received on port 80, the &#8216;Host&#8217; header is inspected, and the host name listed there is matched against each &#8216;VirtualHost&#8217; based on the value of the &#8216;ServerName&#8217; directive. If it matches then the request is routed to that specific WSGI application running under mod_wsgi.</p>
<p>If the host name listed by the &#8216;Host&#8217; header doesn&#8217;t match the value of &#8216;ServerName&#8217; in any &#8216;VirtualHost&#8217; then what happens is that Apache will fallback to sending the request to whatever was the first &#8216;VirtualHost&#8217; defined in the configuration files.</p>
<p>As it is likely undesirable to have requests for an arbitrary host name we don&#8217;t know about being sent to &#8216;www.example.com', a default &#8216;VirtualHost&#8217; was instead created as the first one. Any request which doesn&#8217;t match on the host name will now go to it, and since 'Require all denied&#8217; was all that was contained in that &#8216;VirtualHost&#8217; it will result in Apache sending back a &#8216;403 Forbidden&#8217; response.</p>
<p>The use of such a default &#8216;VirtualHost&#8217; as a fallback ensures that we get a hard error in the case of where we might mess up the configuration, rather than the request being unexpectedly handled by a different site.</p>
<h1>Moving sites to Docker</h1>
<p>At this point we have our three sites implemented as separate WSGI applications running in separate daemon process groups using mod_wsgi. The WSGI applications for each site are already separated at this point and shouldn&#8217;t interfere with each other. All the same, separating each to run in its own Docker container does bring various benefits including better levels of isolation from the other sites and the host operating system, plus the ready ability to run up the sites separately during development and testing, using the same setup as would be used in production.</p>
<p>For a production deployment of Docker, Apache with mod_wsgi is still going to be better than or as good as other alternatives and mod_wsgi-express makes deploying a WSGI application in a Docker container even easier than the traditional way of deploying WSGI applications with Apache. What you definitely shouldn&#8217;t do is switch to using any builtin development server provided by a web framework. Even with Docker, such development servers are still not suitable for production use even though they are often what is used in documentation or blog posts related to running Python with Docker.</p>
<p>For Apache/mod_wsgi, the Docker image you should use as a base is:</p>
<ul>
<li><a href="https://registry.hub.docker.com/u/grahamdumpleton/mod-wsgi-docker/">https://registry.hub.docker.com/u/grahamdumpleton/mod-wsgi-docker/</a></li>
</ul>
<p>There are multiple versions of the image for Python 2.7, 3.3 and 3.4. There is also a base image if you need to take full control over how a derived image is built, otherwise the &#8216;onbuild&#8217; images supplied provide a convenient way of deploying a WSGI application in a container. Even if using the &#8216;onbuild&#8217; image, hook scripts can still be supplied as part of your application code to perform special build actions or pre deploy steps within the container when started.</p>
<p>For our above sites, the &#8216;Dockerfile&#8217; to build our Docker image would be as simple as:</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "site.wsgi" ]</pre>
</blockquote>
<p>If the WSGI application had a list of Python modules that needed to be available, they would be listed in the &#8216;requirements.txt&#8217; file in the root of the application directory along side the &#8216;Dockerfile&#8217;. The image can then be built by running:</p>
<blockquote>
<pre>docker build -t blog.example.com .</pre>
</blockquote>
<p>We can then run the image manually using:</p>
<blockquote>
<pre>docker run --rm -p 8002:80 blog.example.com</pre>
</blockquote>
<p>When using the &#8216;mod_wsgi-docker&#8217; image, within the Docker container the Apache instance will listen on port 80. As we are going to be running a container for each site, they can&#8217;t all be exported as port 80 on the Docker host. As a result we need to map the internal port 80 to a different external port in each case. Thus we map &#8216;www.example.com&#8217; to port 8001, &#8216;blog.example.com&#8217; to port 8002 and &#8216;wiki.example.com&#8217; to port 8003.</p>
<p>With the sites now running inside of a Docker container on our Docker host, we need to change the front end Apache configuration to proxy requests for the site through to the appropriate Docker container, rather than running the WSGI application for the site on the front end Apache instance.</p>
<p>Previously the Apache configuration was:</p>
<blockquote>
<pre># blog.example.com<br /><br />&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>WSGIDaemonProcess blog.example.com</pre>
<pre>WSGIScriptAlias / /some/path/blog.example.com/site.wsgi \<br />    process-group=blog.example.com application-group=%{GLOBAL}</pre>
<pre>&lt;Directory /some/path/blog.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>This now needs to be changed to:</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>ProxyPass / http://docker.example.com:8002/<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>We have therefore removed the mod_wsgi related configuration from the &#8216;VirtualHost&#8217; and replaced it with a configuration which instead proxies any request for that specific &#8216;VirtualHost&#8217;, through to the port exported for that site on the Docker host.</p>
<h1>URL reconstruction</h1>
<p>The proxy changes above are enough to at least have HTTP requests originally intended for &#8216;blog.example.com&#8217;, to be proxied through to the new home for the site running under the Docker container. The use of a proxy in this way will however cause a few problems. This is because the WSGI application will now instead think it is running at &#8216;http://docker.example.com:8002'. This is reflected in the values passed through to the WSGI application for each request in the WSGI environ dictionary.</p>
<blockquote>
<pre>HTTP_HOST: 'docker.example.com:8002'<br />PATH_INFO: '/'<br />QUERY_STRING: ''<br />SERVER_NAME: 'docker.example.com'<br />SERVER_PORT: '8002'<br />SCRIPT_NAME: ''<br />wsgi.url_scheme: 'http'</pre>
</blockquote>
<p>We can see the affects of the problem by creating a test WSGI application which implements the algorithm for <a href="https://www.python.org/dev/peps/pep-3333/#url-reconstruction">URL reconstruction</a> as outlined in the WSGI specification (PEP 3333).</p>
<blockquote>
<pre>from urllib import quote</pre>
<pre>def reconstruct_url(environ):<br />    url = environ['wsgi.url_scheme']+'://'</pre>
<pre>    if environ.get('HTTP_HOST'):<br />        url += environ['HTTP_HOST']<br />    else:<br />        url += environ['SERVER_NAME']</pre>
<pre>    if environ['wsgi.url_scheme'] == 'https':<br />        if environ['SERVER_PORT'] != '443':<br />            url += ':' + environ['SERVER_PORT']<br />    else:<br />        if environ['SERVER_PORT'] != '80':<br />            url += ':' + environ['SERVER_PORT']</pre>
<pre>    url += quote(environ.get('SCRIPT_NAME', ''))<br />    url += quote(environ.get('PATH_INFO', ''))</pre>
<pre>    if environ.get('QUERY_STRING'):<br />        url += '?' + environ['QUERY_STRING']</pre>
<pre>    return url</pre>
<pre>def application(environ, start_response):<br />    status = '200 OK'</pre>
<pre>    output = reconstruct_url(environ)</pre>
<pre>    response_headers = [('Content-type', 'text/plain'),<br />                        ('Content-Length', str(len(output)))]<br />    start_response(status, response_headers)</pre>
<pre>    return [output]</pre>
</blockquote>
<p>The result from this will be:</p>
<blockquote>
<pre>http://docker.example.com:8002/</pre>
</blockquote>
<p>What we want to see here though is the public facing URL and not the URL used internally by the proxy. Thus we want:</p>
<blockquote>
<pre>http://blog.example.com/</pre>
</blockquote>
<p>The consequences of this are that when a WSGI application constructs a URL for use in links within a HTML page response, or in any HTTP response header such as the &#8216;Location&#8217; header, the URL returned will be wrong.</p>
<p>If the internal site is not publicly accessible then the user will not be able to then reach the site when the URL is followed.</p>
<p>If the internal site is actually publicly accessible via the URL, then it will work, but then they will be accessing it using what should notionally be a private URL and not the public URL. Such leakage of an internal URL is undesirable.</p>
<p>The solution to this problem is in what additional HTTP request headers the front end Apache will send along with the request when the &#8216;ProxyPass&#8217; directive is used. These headers appear in the WSGI environ dictionary passed with each request as:</p>
<blockquote>
<pre>HTTP_X_FORWARDED_FOR: '127.0.0.1'<br />HTTP_X_FORWARDED_HOST: 'blog.example.com'<br />HTTP_X_FORWARDED_SERVER: 'blog.example.com'</pre>
</blockquote>
<p>Some Python web frameworks provide inbuilt support or extensions which can be used to take such request headers and use them to override the values set for key values in the WSGI environ dictionary.</p>
<p>For the above code to reconstruct the URL to work properly, the two key values we need to override are &#8216;HTTP_HOST&#8217; and &#8216;SERVER_PORT&#8217;. These need to be overridden with what the values would have been as if seen by the front end Apache server and not the backend.</p>
<p>For &#8216;HTTP_HOST&#8217;, we can get what would have been the value as seen by the front end by taking the value of the &#8216;HTTP_X_FORWARDED_HOST&#8217; value. This value reflects the value of the HTTP request header &#8216;X-Forwarded-Host&#8217; as set by the &#8216;ProxyPass&#8217; directive when the request was being proxied.</p>
<p>What the use of the &#8216;ProxyPass&#8217; directive doesn&#8217;t provide us with though is what the front end port was that the original request was accepted on. We have two ways though that we could use to ensure this information is passed through. In both cases it involves setting the &#8216;X-Forwarded-Port&#8217; request header when proxying the request. This header name is the accepted convention for passing across the port that the front end web server accepted the request on.</p>
<p>The first way is to use the Apache &#8216;mod_headers&#8217; module to set the request header and hard wire it to be port 80.</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>ProxyPass / http://docker.example.com:8002/<br /><br />RequestHeader set X-Forwarded-Port 80<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>The second also uses &#8216;mod_headers&#8217;, but with the port number being calculated dynamically using &#8216;mod_rewrite&#8217;.</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>ProxyPass / http://docker.example.com:8002/<br /><br />RewriteEngine On<br />RewriteRule .* - [E=SERVER_PORT:%{SERVER_PORT},NE]<br /><br />RequestHeader set X-Forwarded-Port %{SERVER_PORT}e<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>In either case, the request header is passed in the WSGI environ dictionary of the back end WSGI application as &#8216;HTTP_X_FORWARDED_PORT&#8217; and similar to how &#8216;HTTP_FORWARDED_HOST&#8217; was used to override &#8216;HTTP_HOST&#8217;, can be used to override &#8216;SERVER_PORT&#8217;.</p>
<p>Having overridden &#8216;HTTP_HOST&#8217; and &#8216;SERVER_PORT&#8217;, our reconstructed URL would now be correct.</p>
<h1>Who do you really trust</h1>
<p>As mentioned, some Python web frameworks do provide features to allow the WSGI environ values to be overridden based on these special headers. Unfortunately not all Python web frameworks do, and even though it is possible to find separate WSGI middleware which may do it, they may not support overriding the port as well as the host. Some don&#8217;t even touch the host and port at all, and are actually only concerned with an entirely separate problem of overriding &#8216;REMOTE_ADDR&#8217; in the WSGI environ dictionary based on information passed in the &#8216;X-Fowarded-For&#8217; request header by a proxy.</p>
<p>Because of the fact that Python web frameworks may not provide a feature to handle such special request headers and because adding in a WSGI middleware can be fiddly, more recent versions of mod_wsgi have inbuilt support for handling such headers.</p>
<p>In this case where we are using the &#8216;mod_wsgi-docker&#8217; image, we would change:</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "site.wsgi" ]</pre>
</blockquote>
<p>to:</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "--trust-proxy-header", "X-Forwarded-Host", \<br />      "--trust-proxy-header", "X-Forwarded-Port", \<br />      "--trust-proxy-header", "X-Forwarded-For", \<br />      "site.wsgi" ]</pre>
</blockquote>
<p>Built in to mod_wsgi is knowledge of what the different headers are used for and when they are marked as being trusted, the appropriate override will be done. In this case, as a result of the headers which were listed as trusted, we update &#8216;HTTP_HOST&#8217;, &#8216;SERVER_PORT&#8217; and &#8216;REMOTE_ADDR&#8217;.</p>
<p>Now unique to how mod_wsgi works which other Python based solutions don&#8217;t provide, is that it understands that for some of the values to be overridden, there are multiple conventions as to what request headers are used.</p>
<p>For example, for &#8216;REMOTE_ADDR&#8217;, request headers which might be used are &#8216;X-Forwarded-For&#8217;, &#8216;X-Client-IP&#8217; and &#8216;X-Real-IP&#8217;. In the face of there being multiple request headers that can represent the same thing, it is important that only the one marked as trusted be used and that the other request headers that can mean the same thing be wiped out and not passed along with the request.</p>
<p>This is to avoid the sort of situation that can arise where the Apache front end is only setting the &#8216;X-Forwarded-For&#8217; request header. If a malicious client itself set the &#8216;X-Real-IP&#8217; header and some WSGI middleware was also being used which took the value of &#8216;HTTP_X_REAL_IP&#8217; and used it to override &#8216;REMOTE_ADDR&#8217;, then you have a potential security issue through a client dictating what IP address the web application thinks it is coming from.</p>
<p>To avoid such problems, when mod_wsgi is told to only trust the &#8216;X-Forwarded-For&#8217; header, it will ensure that the other headers of &#8216;X-Client-IP&#8217; and &#8216;X-Real-IP&#8217; are cleared and not passed through to then be incorrectly interpreted by a WSGI middleware.</p>
<p>This avoids one scenario that can arise as to whether we trust such headers, but we also have the problem of whether the request even came from the proxy which we expected it to, and whose headers we trust.</p>
<p>If a client was able to bypass the proxy and send a request direct to the backend, then it could set the headers itself to anything it wanted and the backend wouldn&#8217;t know.</p>
<p>If this scenario is a concern, then mod_wsgi supports an additional feature where the IP address of the trusted proxy itself can be specified. Such so called trusted headers will then only be honoured if coming from that proxy. If they aren&#8217;t from that proxy, then all the equivalent headers for the value we are trying to override will be cleared from the request and ignored.</p>
<p>Imagining therefore that the IP address of the host where the front end Apache was running was &#8216;192.168.59.3&#8217;, we would use the &#8216;&#8212;trust-proxy&#8217; option to &#8216;mod_wsgi-express&#8217; as:</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "--trust-proxy-header", "X-Forwarded-Host", \<br />      "--trust-proxy-header", "X-Forwarded-Port", \<br />      "--trust-proxy-header", "X-Forwarded-For", \<br />     &#160;"--trust-proxy",&#160;"192.168.59.3", "site.wsgi" ]</pre>
</blockquote>
<p>If multiple proxies were being used, then the &#8216;&#8212;trust-proxy&#8217; option can be supplied more than once. Alternatively, an IP subnet description can be used.</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "--trust-proxy-header", "X-Forwarded-Host", \<br />      "--trust-proxy-header", "X-Forwarded-Port", \<br />      "--trust-proxy-header", "X-Forwarded-For", \<br />     &#160;"--trust-proxy",&#160;"192.168.59.0/24", "site.wsgi" ]</pre>
</blockquote>
<p>In addition to being able to list an immediate proxy, you can supply IP addresses of other proxies if the request needs to traverse through more than one. These would come into play with determining how far back in the proxy chain, the value of the &#8216;X-Fowarded-For&#8217; header can be trusted in determining the true client IP address. In other words, the client IP address will be interpreted as being that immediately before the forward most trusted host.</p>
<p>Although I have shown here how this trust mechanism is setup when using mod_wsgi-express, the same can be done if configuring mod_wsgi in the Apache configuration itself. In that case the configuration directives are &#8216;WSGITrustedProxyHeaders&#8217; and &#8216;WSGITrustedProxies&#8217;.</p>
<h1>Secure connections</h1>
<p>The changes described above cover the situation of a normal HTTP connection. What though where the original front end Apache was also accepting secure connections.</p>
<p>The original Apache configuration in this case for each site would have been something like:</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com<br /><br />WSGIDaemonProcess blog.example.com<br /><br />WSGIScriptAlias / /some/path/blog.example.com/site.wsgi \<br />&#160; &#160; process-group=blog.example.com application-group=%{GLOBAL}<br /><br />&lt;Directory /some/path/blog.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;<br /><br />&lt;VirtualHost *:443&gt;<br />ServerName blog.example.com<br /><br />SSLEngine On<br />SSLCertificateFile /some/path/blog.example.com/server.crt<br />SSLCertificateKeyFile&#160;/some/path/blog.example.com/server.key<br /><br />WSGIScriptAlias / /some/path/blog.example.com/site.wsgi \<br /> &#160; &#160;process-group=blog.example.com application-group=%{GLOBAL}</pre>
<pre>&lt;Directory /some/path/blog.example.com&gt;<br />&lt;Files site.wsgi&gt;<br />Require all granted<br />&lt;/Files&gt;<br />&lt;/Directory&gt;<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>In separating out the site into a separate Docker container, as the front end Apache is still the initial termination point, it will still be necessary for it to also handle the secure connections. So long as connections through to the site running under Docker are in a secure non public network, then we can stick with just using a normal HTTP connection between the front end and the site running under Docker.</p>
<p>The updated Apache configuration when it is changed to proxy the site through to the Docker instance will be:</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>ProxyPass / http://docker.example.com:8002/<br /><br />RequestHeader set X-Forwarded-Port 80<br />&lt;/VirtualHost&gt;<br /><br />&lt;VirtualHost *:443&gt;<br />ServerName blog.example.com<br /><br />SSLEngine On<br />SSLCertificateFile /some/path/blog.example.com/server.crt<br />SSLCertificateKeyFile&#160;/some/path/blog.example.com/server.key<br /><br />ProxyPass / http://docker.example.com:8002/<br /><br />RequestHeader set X-Forwarded-Port 443<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>Checking access to our site over the secure connection with our test script which reconstructs the URL and we find though we are not getting the desired result. Specifically, the reconstructed URL is using &#8216;http&#8217; as the protocol scheme and not &#8216;https&#8217;. This would mean any URLs generated in HTML responses or in a response header such as &#8216;Location&#8217;, would cause users to start using an insecure connection.</p>
<p>The problem in this case is that the &#8216;wsgi.url_scheme&#8217; value in the WSGI environ dictionary is being passed as &#8216;http&#8217;. This is due to the web server running in the Docker instance only accepting HTTP connections. We somehow now need to pass across from the front end that the initial connection to the front end Apache instance was in fact a secure connection.</p>
<p>For passing information about whether a secure connection was used, there is no one HTTP header which is universally accepted as a de-facto standard. There are actually about five different headers which different software packages have supported. In our example here we will use the &#8216;X-Forwarded-Scheme&#8217; header, setting it to be &#8216;https&#8217; when that protocol scheme is being used.</p>
<blockquote>
<pre># blog.example.com</pre>
<pre>&lt;VirtualHost *:80&gt;<br />ServerName blog.example.com</pre>
<pre>ProxyPass / http://docker.example.com:8002/<br /><br />RequestHeader set X-Forwarded-Port 80<br />&lt;/VirtualHost&gt;<br /><br />&lt;VirtualHost *:443&gt;<br />ServerName blog.example.com<br /><br />SSLEngine On<br />SSLCertificateFile /some/path/blog.example.com/server.crt<br />SSLCertificateKeyFile&#160;/some/path/blog.example.com/server.key<br /><br />ProxyPass / http://docker.example.com:8002/<br /><br />RequestHeader set X-Forwarded-Port 443<br />RequestHeader set X-Forwarded-Scheme https<br />&lt;/VirtualHost&gt;</pre>
</blockquote>
<p>Determining the value for this header could also have been done using mod_rewrite, but we will stick with hard wiring the value. We only need to do this for the &#8216;VirtualHost&#8217; corresponding to the secure connection, i.e., port 443, as the lack of the header will be taken as meaning a HTTP connection was used.</p>
<p>In the Dockerfile where the options to mod_wsgi-express are being supplied, we now add this header as an additional trusted proxy header and mod_wsgi will ensure that the correct thing is done.</p>
<blockquote>
<pre>FROM grahamdumpleton/mod-wsgi-docker:python-2.7-onbuild<br />CMD [ "--trust-proxy-header", "X-Forwarded-Host", \<br />      "--trust-proxy-header", "X-Forwarded-Port", \<br />      "--trust-proxy-header", "X-Forwarded-For", \<br />      "--trust-proxy-header", "X-Forwarded-Scheme", \<br />      "site.wsgi" ]</pre>
</blockquote>
<p>The end result will be that where a secure connection was used at the front end Apache, then mod_wsgi running in the Docker instance will override &#8216;wsgi.url_scheme&#8217; to be &#8216;https&#8217; and URL reconstruction will then be correct.</p>
<h1>Non WSGI handlers</h1>
<p>The above configurations and the fixes to the WSGI environ dictionary done by mod_wsgi, running in the Docker instance, will ensure that the construction of any URLs when being done within a WSGI application will work correctly.</p>
<p>If also hosting static files using the Apache instance running in the Docker instance, or running a dynamic web application using some other Apache module, the fixes will not apply to those scenarios.</p>
<p>Being that we are running a Python web application using mod_wsgi, the only concern for us may be whether the lack of the fixes when serving up static files using the same Apache running in the Docker instance could be an issue. You might be thinking that it wouldn&#8217;t since what is being served up is static and so not affected by what URL it was accessed as.</p>
<p>Unfortunately there is one scenario where it can be an issue even when serving up static files. I will describe that issue in a future post, where it can be a problem, and what can be done about it when there is.</p>
<div style='clear: both;'></div>
</div>
<div class='post-footer'>
<div class='post-footer-line post-footer-line-1'>
<span class='post-author vcard'>
Posted by
<span class='fn' itemprop='author' itemscope='itemscope' itemtype='http://schema.org/Person'>
<meta content='https://www.blogger.com/profile/13609779138164842374' itemprop='url'/>
<a class='g-profile' href='https://www.blogger.com/profile/13609779138164842374' rel='author' title='author profile'>
<span itemprop='name'>Graham Dumpleton</span>
</a>
</span>
</span>
<span class='post-timestamp'>
at
<meta content='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html' itemprop='url'/>
<a class='timestamp-link' href='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html' rel='bookmark' title='permanent link'><abbr class='published' itemprop='datePublished' title='2015-06-30T15:01:00+10:00'>3:01&#8239;PM</abbr></a>
</span>
<span class='post-comment-link'>
</span>
<span class='post-icons'>
<span class='item-action'>
<a href='https://www.blogger.com/email-post/2363643920942057324/8749217724374558967' title='Email Post'>
<img alt='' class='icon-action' height='13' src='https://resources.blogblog.com/img/icon18_email.gif' width='18'/>
</a>
</span>
</span>
<div class='post-share-buttons goog-inline-block'>
<a class='goog-inline-block share-button sb-email' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=8749217724374558967&target=email' target='_blank' title='Email This'><span class='share-button-link-text'>Email This</span></a><a class='goog-inline-block share-button sb-blog' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=8749217724374558967&target=blog' onclick='window.open(this.href, "_blank", "height=270,width=475"); return false;' target='_blank' title='BlogThis!'><span class='share-button-link-text'>BlogThis!</span></a><a class='goog-inline-block share-button sb-twitter' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=8749217724374558967&target=twitter' target='_blank' title='Share to X'><span class='share-button-link-text'>Share to X</span></a><a class='goog-inline-block share-button sb-facebook' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=8749217724374558967&target=facebook' onclick='window.open(this.href, "_blank", "height=430,width=640"); return false;' target='_blank' title='Share to Facebook'><span class='share-button-link-text'>Share to Facebook</span></a><a class='goog-inline-block share-button sb-pinterest' href='https://www.blogger.com/share-post.g?blogID=2363643920942057324&postID=8749217724374558967&target=pinterest' target='_blank' title='Share to Pinterest'><span class='share-button-link-text'>Share to Pinterest</span></a>
</div>
</div>
<div class='post-footer-line post-footer-line-2'>
<span class='post-labels'>
Labels:
<a href='http://blog.dscpl.com.au/search/label/apache' rel='tag'>apache</a>,
<a href='http://blog.dscpl.com.au/search/label/docker' rel='tag'>docker</a>,
<a href='http://blog.dscpl.com.au/search/label/mod_wsgi' rel='tag'>mod_wsgi</a>,
<a href='http://blog.dscpl.com.au/search/label/python' rel='tag'>python</a>,
<a href='http://blog.dscpl.com.au/search/label/wsgi' rel='tag'>wsgi</a>
</span>
</div>
<div class='post-footer-line post-footer-line-3'>
<span class='post-location'>
</span>
</div>
</div>
</div>
<div class='comments' id='comments'>
<a name='comments'></a>
<h4>3 comments:</h4>
<div id='Blog1_comments-block-wrapper'>
<dl class='avatar-comment-indent' id='comments-block'>
<dt class='comment-author blog-author' id='c6970315263736453228'>
<a name='c6970315263736453228'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-6970315263736453228-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-6970315263736453228'>
<p>
Followup post that covers the further issues with redirections when hosting static files can be found at:<br /><br />http://blog.dscpl.com.au/2015/07/redirection-problems-when-proxying-to.html
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html?showComment=1435727231919#c6970315263736453228' title='comment permalink'>
July 1, 2015 at 3:07&#8239;PM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/6970315263736453228' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author ' id='c7324945180607430389'>
<a name='c7324945180607430389'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/16799263680390597305" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-7324945180607430389-16799263680390597305"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Unknown">

</a></span></div>
<a href='https://www.blogger.com/profile/16799263680390597305' rel='nofollow'>Unknown</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-7324945180607430389'>
<p>
Minor typo, but it made me do a double-take nonetheless:  &quot;we need to map the internal port 80 to a different external port in each case. Thus we map ... &#8216;blog.example.com&#8217; to port 8002 and &#8216;wiki.example.com&#8217; to port 8002&quot;<br /><br />Clearly the intent was for one of those 8002&#39;s to be 8003. Thanks for mod-wsgi!
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html?showComment=1435929802689#c7324945180607430389' title='comment permalink'>
July 3, 2015 at 11:23&#8239;PM
</a>
<span class='item-control blog-admin pid-267082182'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/7324945180607430389' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
<dt class='comment-author blog-author' id='c9084954133501212509'>
<a name='c9084954133501212509'></a>
<div class="avatar-image-container avatar-stock"><span dir="ltr"><a href="https://www.blogger.com/profile/13609779138164842374" target="" rel="nofollow" onclick="" class="avatar-hovercard" id="av-9084954133501212509-13609779138164842374"><img src="//www.blogger.com/img/blogger_logo_round_35.png" width="35" height="35" alt="" title="Graham Dumpleton">

</a></span></div>
<a href='https://www.blogger.com/profile/13609779138164842374' rel='nofollow'>Graham Dumpleton</a>
said...
</dt>
<dd class='comment-body' id='Blog1_cmt-9084954133501212509'>
<p>
Fixed. Thanks.
</p>
</dd>
<dd class='comment-footer'>
<span class='comment-timestamp'>
<a href='http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html?showComment=1435959829406#c9084954133501212509' title='comment permalink'>
July 4, 2015 at 7:43&#8239;AM
</a>
<span class='item-control blog-admin pid-1526776468'>
<a class='comment-delete' href='https://www.blogger.com/comment/delete/2363643920942057324/9084954133501212509' title='Delete Comment'>
<img src='https://resources.blogblog.com/img/icon_delete13.gif'/>
</a>
</span>
</span>
</dd>
</dl>
</div>
<p class='comment-footer'>
<a href='https://www.blogger.com/comment/fullpage/post/2363643920942057324/8749217724374558967' onclick=''>Post a Comment</a>
</p>
</div>
</div>

        </div></div>
      
</div>
<div class='blog-pager' id='blog-pager'>
<span id='blog-pager-newer-link'>
<a class='blog-pager-newer-link' href='http://blog.dscpl.com.au/2015/07/redirection-problems-when-proxying-to.html' id='Blog1_blog-pager-newer-link' title='Newer Post'>Newer Post</a>
</span>
<span id='blog-pager-older-link'>
<a class='blog-pager-older-link' href='http://blog.dscpl.com.au/2015/06/installing-custom-python-version-into.html' id='Blog1_blog-pager-older-link' title='Older Post'>Older Post</a>
</span>
<a class='home-link' href='http://blog.dscpl.com.au/'>Home</a>
</div>
<div class='clear'></div>
<div class='post-feeds'>
<div class='feed-links'>
Subscribe to:
<a class='feed-link' href='http://blog.dscpl.com.au/feeds/8749217724374558967/comments/default' target='_blank' type='application/atom+xml'>Post Comments (Atom)</a>
</div>
</div>
</div></div>
</div>
</div>
<div class='column-left-outer'>
<div class='column-left-inner'>
<aside>
</aside>
</div>
</div>
<div class='column-right-outer'>
<div class='column-right-inner'>
<aside>
<div class='sidebar section' id='sidebar-right-1'><div class='widget Profile' data-version='1' id='Profile1'>
<h2>About Me</h2>
<div class='widget-content'>
<dl class='profile-datablock'>
<dt class='profile-data'>
<a class='profile-name-link g-profile' href='https://www.blogger.com/profile/13609779138164842374' rel='author' style='background-image: url(//www.blogger.com/img/logo-16.png);'>
Graham Dumpleton
</a>
</dt>
</dl>
<a class='profile-link' href='https://www.blogger.com/profile/13609779138164842374' rel='author'>View my complete profile</a>
<div class='clear'></div>
</div>
</div><div class='widget PageList' data-version='1' id='PageList1'>
<h2>Quick Links</h2>
<div class='widget-content'>
<ul>
<li>
<a href='http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html'>Decorators and monkey patching.</a>
</li>
<li>
<a href='http://blog.dscpl.com.au/p/using-python-with-docker.html'>Using Python with Docker.</a>
</li>
</ul>
<div class='clear'></div>
</div>
</div><div class='widget BlogArchive' data-version='1' id='BlogArchive1'>
<h2>Blog Archive</h2>
<div class='widget-content'>
<div id='ArchiveList'>
<div id='BlogArchive1_ArchiveList'>
<select id='BlogArchive1_ArchiveMenu'>
<option value=''>Blog Archive</option>
<option value='http://blog.dscpl.com.au/2019/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2018/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2018/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2018/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2018/01/'>January (1)</option>
<option value='http://blog.dscpl.com.au/2017/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2016/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2016/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2016/07/'>July (1)</option>
<option value='http://blog.dscpl.com.au/2016/04/'>April (2)</option>
<option value='http://blog.dscpl.com.au/2016/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2016/02/'>February (2)</option>
<option value='http://blog.dscpl.com.au/2016/01/'>January (3)</option>
<option value='http://blog.dscpl.com.au/2015/12/'>December (6)</option>
<option value='http://blog.dscpl.com.au/2015/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2015/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2015/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2015/06/'>June (5)</option>
<option value='http://blog.dscpl.com.au/2015/05/'>May (7)</option>
<option value='http://blog.dscpl.com.au/2015/04/'>April (4)</option>
<option value='http://blog.dscpl.com.au/2015/03/'>March (4)</option>
<option value='http://blog.dscpl.com.au/2015/01/'>January (2)</option>
<option value='http://blog.dscpl.com.au/2014/12/'>December (4)</option>
<option value='http://blog.dscpl.com.au/2014/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2014/09/'>September (7)</option>
<option value='http://blog.dscpl.com.au/2014/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2014/05/'>May (1)</option>
<option value='http://blog.dscpl.com.au/2014/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2014/02/'>February (4)</option>
<option value='http://blog.dscpl.com.au/2014/01/'>January (8)</option>
<option value='http://blog.dscpl.com.au/2013/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/12/'>December (1)</option>
<option value='http://blog.dscpl.com.au/2012/10/'>October (4)</option>
<option value='http://blog.dscpl.com.au/2012/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2011/11/'>November (1)</option>
<option value='http://blog.dscpl.com.au/2011/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2011/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2011/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2011/01/'>January (5)</option>
<option value='http://blog.dscpl.com.au/2010/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2010/10/'>October (1)</option>
<option value='http://blog.dscpl.com.au/2010/08/'>August (2)</option>
<option value='http://blog.dscpl.com.au/2010/06/'>June (2)</option>
<option value='http://blog.dscpl.com.au/2010/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2010/04/'>April (1)</option>
<option value='http://blog.dscpl.com.au/2010/03/'>March (3)</option>
<option value='http://blog.dscpl.com.au/2009/11/'>November (4)</option>
<option value='http://blog.dscpl.com.au/2009/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2009/09/'>September (1)</option>
<option value='http://blog.dscpl.com.au/2009/08/'>August (3)</option>
<option value='http://blog.dscpl.com.au/2009/05/'>May (2)</option>
<option value='http://blog.dscpl.com.au/2009/04/'>April (5)</option>
<option value='http://blog.dscpl.com.au/2009/03/'>March (5)</option>
<option value='http://blog.dscpl.com.au/2009/02/'>February (1)</option>
<option value='http://blog.dscpl.com.au/2008/12/'>December (2)</option>
<option value='http://blog.dscpl.com.au/2008/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2008/03/'>March (1)</option>
<option value='http://blog.dscpl.com.au/2007/11/'>November (2)</option>
<option value='http://blog.dscpl.com.au/2007/10/'>October (3)</option>
<option value='http://blog.dscpl.com.au/2007/09/'>September (3)</option>
<option value='http://blog.dscpl.com.au/2007/08/'>August (1)</option>
<option value='http://blog.dscpl.com.au/2007/07/'>July (2)</option>
<option value='http://blog.dscpl.com.au/2007/03/'>March (2)</option>
</select>
</div>
</div>
<div class='clear'></div>
</div>
</div><div class='widget Label' data-version='1' id='Label1'>
<h2>Labels</h2>
<div class='widget-content list-label-widget-content'>
<ul>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/python'>python</a>
<span dir='ltr'>(111)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_wsgi'>mod_wsgi</a>
<span dir='ltr'>(86)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wsgi'>wsgi</a>
<span dir='ltr'>(58)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/apache'>apache</a>
<span dir='ltr'>(35)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/docker'>docker</a>
<span dir='ltr'>(34)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/openshift'>openshift</a>
<span dir='ltr'>(26)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/decorators'>decorators</a>
<span dir='ltr'>(15)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/django'>django</a>
<span dir='ltr'>(13)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/kubernetes'>kubernetes</a>
<span dir='ltr'>(12)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/mod_python'>mod_python</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/red%20hat'>red hat</a>
<span dir='ltr'>(9)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/ipython'>ipython</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyterhub'>jupyterhub</a>
<span dir='ltr'>(7)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/new%20relic'>new relic</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/wrapt'>wrapt</a>
<span dir='ltr'>(6)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/pycon'>pycon</a>
<span dir='ltr'>(5)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/s2i'>s2i</a>
<span dir='ltr'>(4)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/gunicorn'>gunicorn</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/uWSGI'>uWSGI</a>
<span dir='ltr'>(3)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/datadog'>datadog</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/nginx'>nginx</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/statsd'>statsd</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/web2py'>web2py</a>
<span dir='ltr'>(2)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/async'>async</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/dyndns53'>dyndns53</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/fastcgi'>fastcgi</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/heroku'>heroku</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/jupyter'>jupyter</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/lektor'>lektor</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/php'>php</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/shiv'>shiv</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/testing'>testing</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/tornado'>tornado</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/warpdrive'>warpdrive</a>
<span dir='ltr'>(1)</span>
</li>
<li>
<a dir='ltr' href='http://blog.dscpl.com.au/search/label/zipapp'>zipapp</a>
<span dir='ltr'>(1)</span>
</li>
</ul>
<div class='clear'></div>
</div>
</div></div>
</aside>
</div>
</div>
</div>
<div style='clear: both'></div>
<!-- columns -->
</div>
<!-- main -->
</div>
</div>
<div class='main-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
<footer>
<div class='footer-outer'>
<div class='footer-cap-top cap-top'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
<div class='fauxborder-left footer-fauxborder-left'>
<div class='fauxborder-right footer-fauxborder-right'></div>
<div class='region-inner footer-inner'>
<div class='foot section' id='footer-1'><div class='widget AdSense' data-version='1' id='AdSense1'>
<div class='widget-content'>
<script type="text/javascript"><!--
google_ad_client="pub-6433235630058377";
google_ad_host="pub-1556223355139109";
google_ad_width=120;
google_ad_height=600;
google_ad_format="120x600_as";
google_ad_type="text";
google_ad_host_channel="0001";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="999999";
google_color_url="5588AA";
google_color_text="666666";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<div class='clear'></div>
</div>
</div></div>
<table border='0' cellpadding='0' cellspacing='0' class='section-columns columns-2'>
<tbody>
<tr>
<td class='first columns-cell'>
<div class='foot no-items section' id='footer-2-1'></div>
</td>
<td class='columns-cell'>
<div class='foot no-items section' id='footer-2-2'></div>
</td>
</tr>
</tbody>
</table>
<!-- outside of the include in order to lock Attribution widget -->
<div class='foot section' id='footer-3' name='Footer'><div class='widget Attribution' data-version='1' id='Attribution1'>
<div class='widget-content' style='text-align: center;'>
Simple theme. Powered by <a href='https://www.blogger.com' target='_blank'>Blogger</a>.
</div>
<div class='clear'></div>
</div></div>
</div>
</div>
<div class='footer-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</footer>
<!-- content -->
</div>
</div>
<div class='content-cap-bottom cap-bottom'>
<div class='cap-left'></div>
<div class='cap-right'></div>
</div>
</div>
</div>
<script type='text/javascript'>
    window.setTimeout(function() {
        document.body.className = document.body.className.replace('loading', '');
      }, 10);
  </script>

<script type="text/javascript" src="https://www.blogger.com/static/v1/widgets/552934507-widgets.js"></script>
<script type='text/javascript'>
window['__wavt'] = 'AOuZoY4qp2r23xnZW3F71PRmoKlXynWDGg:1757390333437';_WidgetManager._Init('//www.blogger.com/rearrange?blogID\x3d2363643920942057324','//blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html','2363643920942057324');
_WidgetManager._SetDataContext([{'name': 'blog', 'data': {'blogId': '2363643920942057324', 'title': 'Graham Dumpleton', 'url': 'http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html', 'canonicalUrl': 'http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html', 'homepageUrl': 'http://blog.dscpl.com.au/', 'searchUrl': 'http://blog.dscpl.com.au/search', 'canonicalHomepageUrl': 'http://blog.dscpl.com.au/', 'blogspotFaviconUrl': 'http://blog.dscpl.com.au/favicon.ico', 'bloggerUrl': 'https://www.blogger.com', 'hasCustomDomain': true, 'httpsEnabled': false, 'enabledCommentProfileImages': true, 'gPlusViewType': 'FILTERED_POSTMOD', 'adultContent': false, 'analyticsAccountNumber': '', 'encoding': 'UTF-8', 'locale': 'en', 'localeUnderscoreDelimited': 'en', 'languageDirection': 'ltr', 'isPrivate': false, 'isMobile': false, 'isMobileRequest': false, 'mobileClass': '', 'isPrivateBlog': false, 'isDynamicViewsAvailable': true, 'feedLinks': '\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default\x22 /\x3e\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/rss+xml\x22 title\x3d\x22Graham Dumpleton - RSS\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/posts/default?alt\x3drss\x22 /\x3e\n\x3clink rel\x3d\x22service.post\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22https://www.blogger.com/feeds/2363643920942057324/posts/default\x22 /\x3e\n\n\x3clink rel\x3d\x22alternate\x22 type\x3d\x22application/atom+xml\x22 title\x3d\x22Graham Dumpleton - Atom\x22 href\x3d\x22http://blog.dscpl.com.au/feeds/8749217724374558967/comments/default\x22 /\x3e\n', 'meTag': '', 'adsenseClientId': 'ca-pub-6433235630058377', 'adsenseHostId': 'ca-host-pub-1556223355139109', 'adsenseHasAds': true, 'adsenseAutoAds': false, 'boqCommentIframeForm': true, 'loginRedirectParam': '', 'view': '', 'dynamicViewsCommentsSrc': '//www.blogblog.com/dynamicviews/4224c15c4e7c9321/js/comments.js', 'dynamicViewsScriptSrc': '//www.blogblog.com/dynamicviews/b4594f574ba3c273', 'plusOneApiSrc': 'https://apis.google.com/js/platform.js', 'disableGComments': true, 'interstitialAccepted': false, 'sharing': {'platforms': [{'name': 'Get link', 'key': 'link', 'shareMessage': 'Get link', 'target': ''}, {'name': 'Facebook', 'key': 'facebook', 'shareMessage': 'Share to Facebook', 'target': 'facebook'}, {'name': 'BlogThis!', 'key': 'blogThis', 'shareMessage': 'BlogThis!', 'target': 'blog'}, {'name': 'X', 'key': 'twitter', 'shareMessage': 'Share to X', 'target': 'twitter'}, {'name': 'Pinterest', 'key': 'pinterest', 'shareMessage': 'Share to Pinterest', 'target': 'pinterest'}, {'name': 'Email', 'key': 'email', 'shareMessage': 'Email', 'target': 'email'}], 'disableGooglePlus': true, 'googlePlusShareButtonWidth': 0, 'googlePlusBootstrap': '\x3cscript type\x3d\x22text/javascript\x22\x3ewindow.___gcfg \x3d {\x27lang\x27: \x27en\x27};\x3c/script\x3e'}, 'hasCustomJumpLinkMessage': false, 'jumpLinkMessage': 'Read more', 'pageType': 'item', 'postId': '8749217724374558967', 'pageName': 'Proxying to a Python web application running in Docker.', 'pageTitle': 'Graham Dumpleton: Proxying to a Python web application running in Docker.'}}, {'name': 'features', 'data': {}}, {'name': 'messages', 'data': {'edit': 'Edit', 'linkCopiedToClipboard': 'Link copied to clipboard!', 'ok': 'Ok', 'postLink': 'Post Link'}}, {'name': 'template', 'data': {'name': 'Simple', 'localizedName': 'Simple', 'isResponsive': false, 'isAlternateRendering': false, 'isCustom': false, 'variant': 'pale', 'variantId': 'pale'}}, {'name': 'view', 'data': {'classic': {'name': 'classic', 'url': '?view\x3dclassic'}, 'flipcard': {'name': 'flipcard', 'url': '?view\x3dflipcard'}, 'magazine': {'name': 'magazine', 'url': '?view\x3dmagazine'}, 'mosaic': {'name': 'mosaic', 'url': '?view\x3dmosaic'}, 'sidebar': {'name': 'sidebar', 'url': '?view\x3dsidebar'}, 'snapshot': {'name': 'snapshot', 'url': '?view\x3dsnapshot'}, 'timeslide': {'name': 'timeslide', 'url': '?view\x3dtimeslide'}, 'isMobile': false, 'title': 'Proxying to a Python web application running in Docker.', 'description': 'I have seen a few questions of late being posed about how to setup Apache to proxy to a Python web application running in a Docker container...', 'url': 'http://blog.dscpl.com.au/2015/06/proxying-to-python-web-application.html', 'type': 'item', 'isSingleItem': true, 'isMultipleItems': false, 'isError': false, 'isPage': false, 'isPost': true, 'isHomepage': false, 'isArchive': false, 'isLabelSearch': false, 'postId': 8749217724374558967}}]);
_WidgetManager._RegisterWidget('_NavbarView', new _WidgetInfo('Navbar1', 'navbar', document.getElementById('Navbar1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_HeaderView', new _WidgetInfo('Header1', 'header', document.getElementById('Header1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogView', new _WidgetInfo('Blog1', 'main', document.getElementById('Blog1'), {'cmtInteractionsEnabled': false, 'lightboxEnabled': true, 'lightboxModuleUrl': 'https://www.blogger.com/static/v1/jsbin/3842676126-lbx.js', 'lightboxCssUrl': 'https://www.blogger.com/static/v1/v-css/828616780-lightbox_bundle.css'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_ProfileView', new _WidgetInfo('Profile1', 'sidebar-right-1', document.getElementById('Profile1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_PageListView', new _WidgetInfo('PageList1', 'sidebar-right-1', document.getElementById('PageList1'), {'title': 'Quick Links', 'links': [{'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/decorators-and-monkey-patching.html', 'id': '3350721465154129789', 'title': 'Decorators and monkey patching.'}, {'isCurrentPage': false, 'href': 'http://blog.dscpl.com.au/p/using-python-with-docker.html', 'id': '5591286857776935907', 'title': 'Using Python with Docker.'}], 'mobile': false, 'showPlaceholder': true, 'hasCurrentPage': false}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_BlogArchiveView', new _WidgetInfo('BlogArchive1', 'sidebar-right-1', document.getElementById('BlogArchive1'), {'languageDirection': 'ltr', 'loadingMessage': 'Loading\x26hellip;'}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_LabelView', new _WidgetInfo('Label1', 'sidebar-right-1', document.getElementById('Label1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AdSenseView', new _WidgetInfo('AdSense1', 'footer-1', document.getElementById('AdSense1'), {}, 'displayModeFull'));
_WidgetManager._RegisterWidget('_AttributionView', new _WidgetInfo('Attribution1', 'footer-3', document.getElementById('Attribution1'), {}, 'displayModeFull'));
</script>
</body>
</html>